<!-- documents.html Fragment -->
<div class="p-4 md:p-6 bg-gray-50 min-h-screen"> <!-- Use a light background for the whole page -->

    <!-- Page Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
        <h1 class="text-2xl font-semibold text-gray-800">Document Centre</h1>
        <div class="flex flex-wrap gap-2 w-full md:w-auto justify-start md:justify-end">
            <!-- Search Bar -->
            <div class="relative flex-grow min-w-[250px]">
                 <input
                    type="text"
                    placeholder="Search name, content, tags..."
                    class="pl-8 pr-3 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out text-sm shadow-sm"
                >
                <i class="fas fa-search absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                <!-- Advanced Search/Filter Trigger (Optional) -->
                <!-- <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-blue-600"><i class="fas fa-filter text-xs"></i></button> -->
            </div>
            <!-- Action Buttons -->
            <button class="btn btn-secondary flex items-center whitespace-nowrap" id="scan-doc-btn">
                <i class="fas fa-scanner mr-1.5 text-xs"></i>
                Scan Document
            </button>
            <button class="btn btn-primary flex items-center whitespace-nowrap" id="upload-btn">
                <i class="fas fa-upload mr-1.5 text-xs"></i>
                Upload
            </button>
            <button class="btn btn-secondary flex items-center whitespace-nowrap" id="new-folder-btn">
                <i class="fas fa-folder-plus mr-1.5 text-xs"></i>
                New Folder
            </button>
             <!-- More Actions Dropdown -->
            <div class="relative" id="more-actions-dropdown">
                 <button class="btn btn-secondary flex items-center whitespace-nowrap" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-ellipsis-v mr-1.5 text-xs"></i>
                    More
                </button>
                <!-- Dropdown Menu (Initially Hidden) -->
                <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 hidden">
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><i class="fas fa-file-medical-alt w-4 mr-2 text-gray-500"></i>Create Court Bundle</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><i class="fas fa-tags w-4 mr-2 text-gray-500"></i>Manage Tags</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><i class="fas fa-cog w-4 mr-2 text-gray-500"></i>Settings</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area: Two-Column Layout -->
    <div class="flex flex-col md:flex-row gap-6">

        <!-- Left Sidebar: Folder Tree & Smart Views -->
        <div class="w-full md:w-72 bg-white shadow-md rounded-lg overflow-hidden flex-shrink-0">
            <div class="p-4 border-b border-gray-200">
                <h2 class="text-lg font-medium text-gray-700">Navigation</h2>
            </div>
            <div class="p-2 space-y-4">
                <!-- Smart Views -->
                <div>
                    <h3 class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Smart Views</h3>
                    <ul class="smart-views">
                         <li><a href="#" class="folder-item"><i class="fas fa-clock text-blue-500 mr-2 w-4 text-center"></i><span>Recent Documents</span></a></li>
                         <li><a href="#" class="folder-item"><i class="fas fa-star text-yellow-500 mr-2 w-4 text-center"></i><span>Starred</span></a></li>
                         <li><a href="#" class="folder-item"><i class="fas fa-users text-purple-500 mr-2 w-4 text-center"></i><span>Shared with me</span></a></li>
                         <li><a href="#" class="folder-item"><i class="fas fa-exclamation-circle text-red-500 mr-2 w-4 text-center"></i><span>Needs Review</span></a></li>
                    </ul>
                </div>

                <!-- Folders -->
                <div>
                    <h3 class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Folders</h3>
                    <ul class="folder-tree">
                        <!-- Root level folders -->
                        <li>
                            <div class="folder-item active">
                                <i class="fas fa-folder-open text-blue-500 mr-2 w-4 text-center"></i>
                                <span>All Documents</span>
                            </div>
                        </li>
                        <li>
                            <div class="folder-item">
                                <i class="fas fa-briefcase text-green-600 mr-2 w-4 text-center"></i> <!-- Specific Icon -->
                                <span>Client Files</span>
                                <i class="fas fa-chevron-right folder-toggle ml-auto text-gray-400 text-xs"></i>
                            </div>
                            <ul class="pl-6 hidden">
                                <li><div class="folder-item"><i class="fas fa-folder text-yellow-500 mr-2"></i><span>ABC Industries</span></div></li>
                                <li><div class="folder-item"><i class="fas fa-folder text-yellow-500 mr-2"></i><span>Johnson Family Trust</span></div></li>
                            </ul>
                        </li>
                         <li>
                            <div class="folder-item">
                                <i class="fas fa-balance-scale text-red-600 mr-2 w-4 text-center"></i> <!-- Specific Icon -->
                                <span>Case Files</span>
                                <i class="fas fa-chevron-right folder-toggle ml-auto text-gray-400 text-xs"></i>
                            </div>
                            <ul class="pl-6 hidden">
                                <li><div class="folder-item"><i class="fas fa-folder text-yellow-500 mr-2"></i><span>Smith v. Jones (SJ-2025-001)</span></div></li>
                                <li><div class="folder-item"><i class="fas fa-folder text-yellow-500 mr-2"></i><span>Williams Estate (WE-2024-015)</span></div></li>
                            </ul>
                        </li>
                        <li><div class="folder-item"><i class="fas fa-file-alt text-gray-500 mr-2 w-4 text-center"></i><span>Firm Templates</span></div></li>
                        <li><div class="folder-item"><i class="fas fa-archive text-gray-500 mr-2 w-4 text-center"></i><span>Archived Files</span></div></li>
                    </ul>
                </div>

                <!-- Tags (Optional) -->
                <div>
                     <h3 class="px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 flex justify-between items-center">
                         <span>Tags</span>
                         <button class="text-blue-500 hover:text-blue-700 text-xs"><i class="fas fa-plus"></i> Add</button>
                    </h3>
                    <div class="flex flex-wrap gap-1 p-2">
                        <span class="tag tag-blue">Evidence</span>
                        <span class="tag tag-red">Urgent</span>
                        <span class="tag tag-green">Draft</span>
                        <span class="tag tag-yellow">Client Review</span>
                        <span class="tag tag-gray">Pleading</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Main Content: File Browser -->
        <div class="flex-grow bg-white shadow-md rounded-lg overflow-hidden flex flex-col">
            <!-- Current Path & View Controls -->
            <div class="p-3 md:p-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
                <div class="flex items-center text-sm text-gray-600 flex-wrap">
                    <span class="font-medium mr-1 shrink-0">Location:</span>
                    <div class="breadcrumb">
                        <a href="#" class="hover:text-blue-600">All Documents</a>
                        <!-- Example deeper path -->
                        <!-- <a href="#" class="hover:text-blue-600">Case Files</a> -->
                        <!-- <a href="#" class="hover:text-blue-600">Smith v. Jones (SJ-2025-001)</a> -->
                    </div>
                </div>
                <div class="flex items-center space-x-1 self-end sm:self-center">
                     <!-- Bulk Actions (Show when items selected) -->
                     <div id="bulk-actions-toolbar" class="hidden items-center space-x-1 mr-2 border-r pr-2 border-gray-300">
                         <span class="text-sm text-gray-600 font-medium mr-1"><span id="selected-count">0</span> selected</span>
                         <button class="btn-icon text-gray-500 hover:text-blue-600" title="Tag Selected"><i class="fas fa-tags"></i></button>
                         <button class="btn-icon text-gray-500 hover:text-blue-600" title="Move Selected"><i class="fas fa-folder-open"></i></button>
                         <button class="btn-icon text-gray-500 hover:text-red-600" title="Delete Selected"><i class="fas fa-trash"></i></button>
                         <button class="btn-icon text-gray-500 hover:text-blue-600" title="Download Selected (.zip)"><i class="fas fa-download"></i></button>
                     </div>
                    <button class="btn-icon text-gray-500 hover:text-gray-700 active" title="Grid View" id="grid-view-btn">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button class="btn-icon text-gray-500 hover:text-gray-700" title="List View" id="list-view-btn">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>

            <!-- Drag & Drop Upload Zone -->
            <div id="drop-zone" class="p-4 border-b border-gray-200 bg-gray-50 text-center hidden"> <!-- Initially hidden, shown via JS -->
                <div class="border-2 border-dashed border-gray-300 rounded-lg py-6 px-4">
                    <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                    <p class="text-gray-600">Drag and drop files here or</p>
                     <label for="file-input" class="mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium cursor-pointer">
                         browse to upload
                     </label>
                     <input type="file" id="file-input" class="hidden" multiple>
                </div>
            </div>

            <!-- File/Folder Listing Area -->
            <div class="p-4 flex-grow overflow-y-auto">
                <!-- Filters & Sorting -->
                <div class="flex flex-wrap justify-between items-center mb-4 gap-2">
                    <div class="text-sm text-gray-600">
                        <span class="font-medium">25 items</span> (5 folders, 20 files)
                        <!-- Display Active Filters -->
                        <div class="inline-flex gap-1 ml-2 flex-wrap" id="active-filters">
                            <!-- <span class="filter-chip">Type: PDF <button>×</button></span> -->
                            <!-- <span class="filter-chip">Tag: Evidence <button>×</button></span> -->
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label class="text-sm text-gray-600 whitespace-nowrap">Sort by:</label>
                        <select class="border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 shadow-sm bg-white">
                            <option>Modified Date (Newest)</option>
                            <option>Modified Date (Oldest)</option>
                            <option>Name (A-Z)</option>
                            <option>Name (Z-A)</option>
                            <option>Size</option>
                            <option>Type</option>
                        </select>
                         <button class="btn-icon text-gray-500 hover:text-blue-600" title="Filter Options">
                             <i class="fas fa-filter"></i>
                         </button>
                    </div>
                </div>

                <!-- Grid View (Default) -->
                <div id="grid-view-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Folder Examples -->
                    <div class="document-card folder" data-id="folder-1">
                        <input type="checkbox" class="item-checkbox">
                        <div class="card-icon"><i class="fas fa-folder text-yellow-500 text-4xl"></i></div>
                        <div class="card-details">
                            <h3 class="card-title" title="Contract Templates">Contract Templates</h3>
                            <p class="card-meta">12 items</p>
                        </div>
                         <button class="card-action-btn btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                             <i class="fas fa-ellipsis-v"></i>
                         </button>
                    </div>
                    <div class="document-card folder" data-id="folder-2">
                         <input type="checkbox" class="item-checkbox">
                         <div class="card-icon"><i class="fas fa-balance-scale text-red-600 text-4xl"></i></div> <!-- Case Icon -->
                         <div class="card-details">
                            <h3 class="card-title" title="Case Files / Smith v. Jones">Smith v. Jones</h3>
                            <p class="card-meta">35 items • Case: SJ-2025-001</p>
                        </div>
                         <button class="card-action-btn btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                             <i class="fas fa-ellipsis-v"></i>
                         </button>
                    </div>

                    <!-- Document Examples -->
                    <div class="document-card" data-id="doc-1">
                         <input type="checkbox" class="item-checkbox">
                         <div class="card-icon">
                            <i class="fas fa-file-pdf text-red-500 text-4xl"></i>
                            <span class="ocr-status ocr-yes" title="OCR Available">OCR</span>
                         </div>
                        <div class="card-details">
                            <h3 class="card-title" title="Settlement Agreement - Smith (FINAL).pdf">Settlement Agre... (FINAL).pdf <span class="version-chip" title="Version 3">v3</span></h3>
                            <p class="card-meta">PDF • 2.5 MB • Apr 12, 2025</p>
                            <div class="tags-preview">
                                <span class="tag tag-sm tag-green">Draft</span>
                                <span class="tag tag-sm tag-blue">Evidence</span>
                            </div>
                        </div>
                         <button class="card-action-btn btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                             <i class="fas fa-ellipsis-v"></i>
                         </button>
                         <!-- Example Context Menu (Hidden, shown on btn click) -->
                         <div class="context-menu">
                             <a href="#"><i class="fas fa-eye w-4"></i> Preview</a>
                             <a href="#"><i class="fas fa-download w-4"></i> Download</a>
                             <a href="#"><i class="fas fa-pencil-alt w-4"></i> Rename</a>
                             <a href="#"><i class="fas fa-history w-4"></i> Version History</a>
                             <a href="#"><i class="fas fa-tags w-4"></i> Add/Edit Tags</a>
                             <a href="#"><i class="fas fa-folder-open w-4"></i> Move</a>
                             <a href="#"><i class="fas fa-link w-4"></i> Link to Case/Client</a>
                             <a href="#"><i class="fas fa-share-alt w-4"></i> Share / Permissions</a>
                             <a href="#"><i class="fas fa-file-medical-alt w-4"></i> Add to Bundle</a>
                             <a href="#" class="text-red-600"><i class="fas fa-trash w-4"></i> Delete</a>
                         </div>
                    </div>

                     <div class="document-card" data-id="doc-2">
                         <input type="checkbox" class="item-checkbox">
                         <div class="card-icon">
                            <i class="fas fa-file-word text-blue-500 text-4xl"></i>
                         </div>
                        <div class="card-details">
                            <h3 class="card-title" title="Plaintiff's Affidavit Draft 2.docx">Plaintiff's Affidavit Draft 2.docx <span class="version-chip" title="Version 2">v2</span></h3>
                            <p class="card-meta">DOCX • 1.8 MB • Apr 10, 2025</p>
                             <div class="tags-preview">
                                <span class="tag tag-sm tag-gray">Pleading</span>
                            </div>
                        </div>
                         <button class="card-action-btn btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                             <i class="fas fa-ellipsis-v"></i>
                         </button>
                    </div>

                     <div class="document-card" data-id="doc-3">
                         <input type="checkbox" class="item-checkbox">
                        <div class="card-icon">
                            <i class="fas fa-file-image text-purple-500 text-4xl"></i>
                            <span class="ocr-status ocr-no" title="No Text Layer (Needs OCR)">No OCR</span>
                        </div>
                        <div class="card-details">
                            <h3 class="card-title" title="Scanned Exhibit A - Property Damage.pdf">Scanned Exhibit A - Prop....pdf</h3>
                            <p class="card-meta">PDF • 6.8 MB • Apr 5, 2025</p>
                        </div>
                         <button class="card-action-btn btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                             <i class="fas fa-ellipsis-v"></i>
                         </button>
                         <!-- Context menu includes "Run OCR" if ocr-no -->
                         <div class="context-menu">
                             <!-- ... other actions -->
                             <a href="#"><i class="fas fa-search-plus w-4"></i> Run OCR</a>
                             <!-- ... other actions -->
                         </div>
                    </div>

                    <!-- ... more document/folder cards ... -->
                </div>

                <!-- List View (Initially Hidden) -->
                <div id="list-view-container" class="hidden">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                            <tr>
                                <th scope="col" class="p-3 w-4"><input type="checkbox" id="select-all-list"></th>
                                <th scope="col" class="p-3">Name</th>
                                <th scope="col" class="p-3 hidden md:table-cell">Type</th>
                                <th scope="col" class="p-3 hidden lg:table-cell">Tags</th>
                                <th scope="col" class="p-3 hidden sm:table-cell">Size</th>
                                <th scope="col" class="p-3">Last Modified</th>
                                <th scope="col" class="p-3 w-10 text-center"></th> <!-- Actions -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Example Folder Row -->
                            <tr class="bg-white border-b hover:bg-gray-50 cursor-pointer">
                                <td class="p-3"><input type="checkbox" class="item-checkbox"></td>
                                <td class="p-3 font-medium text-gray-900 flex items-center">
                                    <i class="fas fa-folder text-yellow-500 mr-2"></i>
                                    Contract Templates
                                </td>
                                <td class="p-3 hidden md:table-cell">Folder</td>
                                <td class="p-3 hidden lg:table-cell">-</td>
                                <td class="p-3 hidden sm:table-cell">-</td>
                                <td class="p-3">Apr 10, 2025</td>
                                <td class="p-3 text-center relative">
                                    <button class="btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                                         <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <!-- Context menu positioned here -->
                                </td>
                            </tr>
                             <!-- Example File Row -->
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="p-3"><input type="checkbox" class="item-checkbox"></td>
                                <td class="p-3 font-medium text-gray-900 flex items-center">
                                     <i class="fas fa-file-pdf text-red-500 mr-2"></i>
                                     Settlement Agreement - Smith (FINAL).pdf
                                     <span class="version-chip ml-1" title="Version 3">v3</span>
                                     <span class="ocr-status ocr-yes ml-1" title="OCR Available">OCR</span>
                                </td>
                                <td class="p-3 hidden md:table-cell">PDF</td>
                                <td class="p-3 hidden lg:table-cell">
                                    <div class="flex flex-wrap gap-1">
                                        <span class="tag tag-sm tag-green">Draft</span>
                                        <span class="tag tag-sm tag-blue">Evidence</span>
                                    </div>
                                </td>
                                <td class="p-3 hidden sm:table-cell">2.5 MB</td>
                                <td class="p-3">Apr 12, 2025</td>
                                <td class="p-3 text-center relative">
                                     <button class="btn-icon text-gray-500 hover:text-gray-700" title="More Options">
                                         <i class="fas fa-ellipsis-v"></i>
                                     </button>
                                     <!-- Context menu positioned here -->
                                </td>
                            </tr>
                            <!-- ... more rows ... -->
                        </tbody>
                    </table>
                </div>

                 <!-- Placeholder for Scan Modal/UI -->
                 <div id="scan-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 hidden">
                     <div class="relative top-20 mx-auto p-5 border w-full max-w-xl shadow-lg rounded-md bg-white">
                         <div class="flex justify-between items-center border-b pb-3 mb-3">
                             <h3 class="text-lg font-medium text-gray-900">Scan Document</h3>
                             <button class="text-gray-400 hover:text-gray-600" onclick="document.getElementById('scan-modal').style.display='none'">×</button>
                         </div>
                         <div class="text-sm">
                             <p class="mb-4 text-gray-600">Place document(s) in scanner. Configure settings below and click Scan.</p>
                             <!-- Scanning Controls (Simplified - Requires JS library integration) -->
                             <div class="space-y-3 mb-4">
                                 <div>
                                     <label class="block text-sm font-medium text-gray-700">Scanner:</label>
                                     <select class="mt-1 block w-full border border-gray-300 rounded px-2 py-1 text-sm shadow-sm">
                                         <option>[Detecting Scanners...]</option>
                                         <!-- Options populated by JS -->
                                     </select>
                                 </div>
                                 <div>
                                     <label class="block text-sm font-medium text-gray-700">File Name:</label>
                                     <input type="text" placeholder="Auto-generated or enter name" class="mt-1 block w-full border border-gray-300 rounded px-2 py-1 text-sm shadow-sm">
                                     <p class="text-xs text-gray-500 mt-1">Suggestion: [Date]-[Client/Case]-[DocType]</p>
                                 </div>
                                 <div class="flex items-center">
                                    <input id="ocr-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded mr-2" checked>
                                    <label for="ocr-checkbox" class="text-sm text-gray-700">Run OCR (Make text searchable)</label>
                                 </div>
                                 <div>
                                      <label class="block text-sm font-medium text-gray-700">Save to Folder:</label>
                                     <!-- Folder selection component here -->
                                      <input type="text" value="/Case Files/Smith v. Jones" class="mt-1 block w-full border border-gray-300 rounded px-2 py-1 text-sm shadow-sm bg-gray-100" readonly>
                                 </div>
                                  <div>
                                      <label class="block text-sm font-medium text-gray-700">Add Tags:</label>
                                     <!-- Tag input component here -->
                                     <input type="text" placeholder="e.g., Exhibit, Correspondence" class="mt-1 block w-full border border-gray-300 rounded px-2 py-1 text-sm shadow-sm">
                                  </div>
                             </div>
                             <div class="flex justify-end gap-2">
                                 <button class="btn btn-secondary" onclick="document.getElementById('scan-modal').style.display='none'">Cancel</button>
                                 <button class="btn btn-primary">Start Scan</button>
                             </div>
                         </div>
                     </div>
                 </div>


            </div> <!-- End File/Folder Listing Area -->

        </div> <!-- End Right Main Content -->
    </div> <!-- End Main Content Area -->

</div>

<!-- Local Styles for this Fragment -->
<style>
    /* Base Button Styles (Ensure consistency) */
    .btn {
        padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 500; cursor: pointer;
        transition: all 0.2s ease-in-out; border: 1px solid transparent; font-size: 0.875rem;
        line-height: 1.25rem; display: inline-flex; align-items: center; justify-content: center;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
    }
    .btn-primary { background-color: #4f46e5; color: white; border-color: #4f46e5; }
    .btn-primary:hover { background-color: #4338ca; border-color: #4338ca; }
    .btn-secondary { background-color: #ffffff; color: #374151; border-color: #d1d5db; }
    .btn-secondary:hover { background-color: #f9fafb; }

    .btn-icon {
        background: none; border: none; padding: 0.35rem; cursor: pointer; border-radius: 50%; /* Make round */
        line-height: 1; transition: color 0.2s ease, background-color 0.2s ease;
        width: 2rem; height: 2rem; /* Fixed size */
        display: inline-flex; align-items: center; justify-content: center;
    }
    .btn-icon:hover { background-color: rgba(0, 0, 0, 0.05); }
    .btn-icon.active { color: #4f46e5; background-color: rgba(79, 70, 229, 0.1); }

    /* Folder Tree */
    .folder-tree, .smart-views { list-style: none; padding: 0; margin: 0; }
    .folder-item {
        display: flex; align-items: center; padding: 0.5rem 0.75rem; margin: 0.125rem 0;
        border-radius: 0.375rem; cursor: pointer; transition: background-color 0.2s ease;
        font-size: 0.875rem; color: #374151; text-decoration: none;
    }
    .folder-item:hover { background-color: #f3f4f6; } /* gray-100 */
    .folder-item.active { background-color: #eff6ff; color: #2563eb; font-weight: 500; } /* blue-50, blue-600 */
    .folder-item i.fa-folder-open { color: #2563eb; } /* Match active color */
    .folder-toggle { transition: transform 0.2s ease; }
    .folder-toggle.open { transform: rotate(90deg); }
    .folder-tree ul { margin-top: 0.25rem; }

    /* Document Card */
    .document-card {
        position: relative; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 0.75rem; /* Reduced padding */
        transition: box-shadow 0.2s ease, transform 0.2s ease; display: flex; flex-direction: column;
        align-items: center; text-align: center; background-color: white; overflow: hidden;
    }
    .document-card:hover { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); transform: translateY(-2px); }
    .document-card.folder { background-color: #fffbeb; cursor: pointer; } /* amber-50 */
    .card-icon { margin-bottom: 0.5rem; position: relative; }
    .card-icon i { line-height: 1; }
    .card-details { width: 100%; overflow: hidden; margin-bottom: 0.25rem; }
    .card-title { font-size: 0.8rem; font-weight: 500; color: #1f2937; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 0.1rem; display: flex; align-items: center; justify-content: center; }
    .card-meta { font-size: 0.7rem; color: #6b7280; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .tags-preview { margin-top: 0.25rem; display: flex; flex-wrap: wrap; gap: 0.25rem; justify-content: center; max-height: 1.2em; overflow: hidden; }
    .item-checkbox { position: absolute; top: 0.5rem; left: 0.5rem; z-index: 5; }
    .card-action-btn { position: absolute; top: 0.25rem; right: 0.25rem; z-index: 5; background-color: rgba(255,255,255,0.8); }
    .document-card:not(:hover) .card-action-btn { display: none; } /* Show only on hover */

    /* Version Chip */
    .version-chip {
        display: inline-block; background-color: #e5e7eb; color: #4b5563; font-size: 0.65rem;
        padding: 0.1rem 0.3rem; border-radius: 0.25rem; font-weight: 500; margin-left: 0.25rem;
        vertical-align: middle;
    }

    /* OCR Status Indicator */
    .ocr-status {
        position: absolute; bottom: -2px; right: -4px; font-size: 0.6rem; padding: 1px 3px;
        border-radius: 3px; font-weight: bold; color: white; line-height: 1;
    }
    .ocr-status.ocr-yes { background-color: #10b981; } /* green-500 */
    .ocr-status.ocr-no { background-color: #f59e0b; } /* amber-500 */
    /* List view OCR */
    #list-view-container .ocr-status { position: static; display: inline-block; vertical-align: middle; }


    /* Tags */
    .tag { display: inline-block; padding: 0.15rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; line-height: 1.2; }
    .tag-sm { padding: 0.1rem 0.4rem; font-size: 0.7rem; }
    .tag-blue { background-color: #dbeafe; color: #2563eb; } /* blue-100, blue-600 */
    .tag-red { background-color: #fee2e2; color: #dc2626; } /* red-100, red-600 */
    .tag-green { background-color: #d1fae5; color: #059669; } /* green-100, green-600 */
    .tag-yellow { background-color: #fef3c7; color: #d97706; } /* yellow-100, yellow-600 */
    .tag-gray { background-color: #f3f4f6; color: #4b5563; } /* gray-100, gray-600 */
    .tag-purple { background-color: #ede9fe; color: #7c3aed; } /* purple-100, purple-600 */

    /* Filter Chips */
    .filter-chip { display: inline-flex; align-items: center; background-color: #e0e7ff; color: #4338ca; font-size: 0.75rem; padding: 0.1rem 0.5rem; border-radius: 0.25rem; }
    .filter-chip button { background: none; border: none; color: inherit; margin-left: 0.25rem; cursor: pointer; padding: 0; line-height: 1; opacity: 0.7; }
    .filter-chip button:hover { opacity: 1; }

    /* Context Menu */
    .context-menu {
        display: none; position: absolute; right: 0; top: 100%; /* Position below button */
        margin-top: 0.25rem; background-color: white; border-radius: 0.375rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        z-index: 20; width: max-content; min-width: 180px; border: 1px solid #e5e7eb;
        padding: 0.5rem 0;
    }
    .document-card:hover .context-menu, /* Show on card hover if needed */
    .card-action-btn:focus + .context-menu, /* Show when button focused */
    .card-action-btn:focus-within + .context-menu { /* Better focus handling */
       visibility: visible;
       opacity: 1;
       transition: visibility 0s, opacity 0.2s ease;
    }
    /* List View context menu positioning */
    #list-view-container tr .relative:hover .context-menu { /* Example hover trigger */
         /* display: block; */ /* Controlled by JS */
         right: 2.5rem; /* Adjust as needed */
         top: 0;
    }
    .context-menu a {
        display: flex; align-items: center; padding: 0.5rem 1rem; font-size: 0.875rem;
        color: #374151; text-decoration: none; white-space: nowrap;
    }
    .context-menu a:hover { background-color: #f3f4f6; }
    .context-menu a i { margin-right: 0.75rem; color: #6b7280; text-align: center; }
    .context-menu a.text-red-600:hover { background-color: #fee2e2; }

    /* Breadcrumb */
    .breadcrumb { display: flex; align-items: center; flex-wrap: wrap; }
    .breadcrumb a { color: inherit; text-decoration: none; }
    .breadcrumb a:hover { text-decoration: underline; }
    .breadcrumb a:not(:last-child)::after { content: '/'; margin: 0 0.5rem; color: #9ca3af; }

    /* Ensure responsiveness for small screens */
    @media (max-width: 640px) {
        #grid-view-container { grid-template-columns: repeat(2, 1fr); gap: 0.75rem; } /* Tighter grid on mobile */
        .document-card { padding: 0.5rem; }
        .card-title { font-size: 0.75rem; }
        .card-meta { font-size: 0.65rem; }
    }
</style>

<!-- REQUIRED JAVASCRIPT (Conceptual - Needs Implementation) -->
<script>
    // --- Basic UI Interaction Logic ---
    document.addEventListener('DOMContentLoaded', () => {
        // Folder Tree Toggling
        const folderToggles = document.querySelectorAll('.folder-toggle');
        folderToggles.forEach(toggle => {
            toggle.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent folder item click
                const sublist = toggle.closest('li').querySelector('ul');
                if (sublist) {
                    sublist.classList.toggle('hidden');
                    toggle.classList.toggle('open');
                    toggle.classList.toggle('fa-chevron-right');
                    toggle.classList.toggle('fa-chevron-down');
                }
            });
        });

        // View Switching (Grid/List)
        const gridBtn = document.getElementById('grid-view-btn');
        const listBtn = document.getElementById('list-view-btn');
        const gridContainer = document.getElementById('grid-view-container');
        const listContainer = document.getElementById('list-view-container');

        gridBtn.addEventListener('click', () => {
            gridContainer.classList.remove('hidden');
            listContainer.classList.add('hidden');
            gridBtn.classList.add('active');
            listBtn.classList.remove('active');
        });

        listBtn.addEventListener('click', () => {
            gridContainer.classList.add('hidden');
            listContainer.classList.remove('hidden');
            gridBtn.classList.remove('active');
            listBtn.classList.add('active');
        });

        // More Actions Dropdown Toggle
        const moreActionsBtn = document.querySelector('#more-actions-dropdown button');
        const moreActionsMenu = document.querySelector('#more-actions-dropdown > div');
        if (moreActionsBtn && moreActionsMenu) {
            moreActionsBtn.addEventListener('click', () => {
                const isExpanded = moreActionsBtn.getAttribute('aria-expanded') === 'true';
                moreActionsBtn.setAttribute('aria-expanded', !isExpanded);
                moreActionsMenu.classList.toggle('hidden');
            });
            // Close dropdown if clicking outside
            document.addEventListener('click', (event) => {
                if (!moreActionsBtn.contains(event.target) && !moreActionsMenu.contains(event.target)) {
                    moreActionsBtn.setAttribute('aria-expanded', 'false');
                    moreActionsMenu.classList.add('hidden');
                }
            });
        }

        // Context Menu Toggling (Example for Grid View - Needs refinement)
        const actionButtons = document.querySelectorAll('.card-action-btn');
        actionButtons.forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent card click
                // Close other open menus first
                document.querySelectorAll('.context-menu').forEach(menu => menu.style.display = 'none');
                // Toggle current menu
                const menu = btn.parentElement.querySelector('.context-menu');
                if (menu) {
                    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
                     // Basic positioning (improve with library if needed)
                     const rect = btn.getBoundingClientRect();
                     const containerRect = gridContainer.getBoundingClientRect(); // Or relevant container
                     menu.style.position = 'absolute'; // Ensure it's absolute
                     menu.style.top = `${rect.bottom - containerRect.top + 4}px`; // Below button
                     menu.style.right = 'auto'; // Reset horizontal
                     menu.style.left = `${rect.left - containerRect.left}px`; // Align left with button

                     // Check if menu goes off-screen right
                     if (rect.left + menu.offsetWidth > containerRect.right) {
                        menu.style.left = 'auto';
                        menu.style.right = `${containerRect.right - rect.right}px`; // Align right edge
                     }
                }
            });
        });
        // Close context menus when clicking elsewhere
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.card-action-btn') && !e.target.closest('.context-menu')) {
                document.querySelectorAll('.context-menu').forEach(menu => menu.style.display = 'none');
            }
             // Close dropdown if clicking outside (add this to the existing dropdown close logic)
            if (!e.target.closest('#more-actions-dropdown button') && !e.target.closest('#more-actions-dropdown > div')) {
                 const btn = document.querySelector('#more-actions-dropdown button');
                 const menu = document.querySelector('#more-actions-dropdown > div');
                 if(btn && menu && btn.getAttribute('aria-expanded') === 'true'){
                     btn.setAttribute('aria-expanded', 'false');
                     menu.classList.add('hidden');
                 }
            }
        });

        // Scan Document Modal Trigger
        const scanBtn = document.getElementById('scan-doc-btn');
        const scanModal = document.getElementById('scan-modal');
        if (scanBtn && scanModal) {
            scanBtn.addEventListener('click', () => {
                scanModal.style.display = 'block';
                // Add logic here to detect scanners using a library like Dynamsoft, ScanApp.js, etc.
            });
        }

        // Drag & Drop Zone / Upload Trigger
        const uploadBtn = document.getElementById('upload-btn');
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
         // Show drop zone on upload button click or when dragging files over window
         if(uploadBtn && dropZone) {
             uploadBtn.addEventListener('click', () => dropZone.classList.toggle('hidden'));
             // Basic drag over detection (add more robust handling)
             window.addEventListener('dragenter', (e) => {
                 e.preventDefault();
                 if(!dropZone.contains(e.target)) { // Don't show if already over dropzone
                     dropZone.classList.remove('hidden');
                 }
             });
             // Need to handle dragleave properly to hide it again if drag ends outside zone
         }
         if(fileInput) {
             fileInput.addEventListener('change', handleFiles);
         }
         if(dropZone) {
             dropZone.addEventListener('dragover', (e) => { e.preventDefault(); e.stopPropagation(); dropZone.classList.add('border-blue-500'); });
             dropZone.addEventListener('dragleave', (e) => { e.preventDefault(); e.stopPropagation(); dropZone.classList.remove('border-blue-500'); });
             dropZone.addEventListener('drop', (e) => {
                 e.preventDefault(); e.stopPropagation();
                 dropZone.classList.remove('border-blue-500');
                 dropZone.classList.add('hidden'); // Hide after drop
                 handleFiles(e.dataTransfer.files);
             });
         }

         function handleFiles(files) {
             console.log("Files selected/dropped:", files);
             // Add upload logic here (e.g., using Fetch API to send to backend)
             alert(`Uploading ${files.length} file(s)... (Implementation needed)`);
         }


        // Bulk Action Toolbar Logic
        const checkboxes = document.querySelectorAll('.item-checkbox');
        const bulkToolbar = document.getElementById('bulk-actions-toolbar');
        const selectedCountSpan = document.getElementById('selected-count');
        const selectAllList = document.getElementById('select-all-list'); // For list view header

        function updateBulkToolbar() {
            const selectedCheckboxes = document.querySelectorAll('.item-checkbox:checked');
            const count = selectedCheckboxes.length;
            if (count > 0) {
                bulkToolbar.classList.remove('hidden');
                bulkToolbar.classList.add('inline-flex'); // Use inline-flex to display correctly
                selectedCountSpan.textContent = count;
            } else {
                bulkToolbar.classList.add('hidden');
                bulkToolbar.classList.remove('inline-flex');
            }
             // Update select-all checkbox state (if applicable)
             if(selectAllList) {
                 const totalVisibleCheckboxes = document.querySelectorAll('#list-view-container .item-checkbox').length;
                 selectAllList.checked = (count > 0 && count === totalVisibleCheckboxes);
                 selectAllList.indeterminate = (count > 0 && count < totalVisibleCheckboxes);
             }
        }

        checkboxes.forEach(cb => {
            cb.addEventListener('change', updateBulkToolbar);
        });

         // Select All logic (for list view)
         if(selectAllList) {
             selectAllList.addEventListener('change', () => {
                 const isChecked = selectAllList.checked;
                 document.querySelectorAll('#list-view-container .item-checkbox').forEach(cb => {
                     cb.checked = isChecked;
                 });
                 updateBulkToolbar();
             });
         }

        // Initial setup
        updateBulkToolbar(); // In case some are checked by default (unlikely)


    }); // End DOMContentLoaded
</script>
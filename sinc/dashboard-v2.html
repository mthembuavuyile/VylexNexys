<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINC - Legal Practice Management</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        .timer-display {
            font-family: monospace;
            font-size: 1.5rem;
        }

        .sidebar-link:hover .icon, .sidebar-link.active .icon {
            color: white;
        }

        .message-ai {
            border-left: 4px solid #4f46e5;
        }

        .message-user {
            border-right: 4px solid #6366f1;
        }

        .case-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .calendar-day {
            aspect-ratio: 1;
            transition: all 0.2s;
        }

        .calendar-day:hover:not(.calendar-day-disabled) {
            background-color: #eef2ff;
        }

        .calendar-day-today {
            background-color: #e0e7ff;
            color: #4f46e5;
            font-weight: bold;
        }

        .calendar-day-selected {
            background-color: #4f46e5;
            color: white;
        }

        .calendar-day-disabled {
            color: #d1d5db;
        }

        .calendar-day-event {
            position: relative;
        }

        .calendar-day-event::after {
            content: "";
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background-color: #4f46e5;
            border-radius: 50%;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .document-card {
            transition: all 0.2s;
        }

        .document-card:hover {
            background-color: #f9fafb;
        }

        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background-color: #e5e7eb;
            overflow: hidden;
        }

        .progress-value {
            height: 100%;
            background-color: #4f46e5;
        }

        .time-entry {
            transition: all 0.2s;
        }

        .time-entry:hover {
            background-color: #f9fafb;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c7d2fe;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #818cf8;
        }

        .tag {
            transition: all 0.2s;
        }

        .tag:hover {
            transform: translateY(-1px);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .recording-pulse {
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* Sidebar mobile styles */
        #sidebar {
             /* Keep transition for smooth open/close */
            transition: transform 0.3s ease-in-out;
        }

        /* Styling for settings tabs */
        .setting-content { display: none; }
        .setting-content.active { display: block; }


    </style>
</head>
<body class="bg-gray-100 h-screen overflow-hidden">
    <div class="flex h-screen relative"> <!-- Added relative for potential overlay -->
        <!-- Sidebar -->
        <aside id="sidebar" class="bg-indigo-900 text-white fixed inset-y-0 left-0 z-40 w-64 transform -translate-x-full md:relative md:translate-x-0 md:flex md:flex-col transition-transform duration-300 ease-in-out">
             <!-- Mobile Close Button -->
             <button id="mobileCloseButton" class="absolute top-4 right-4 text-indigo-200 hover:text-white md:hidden">
                 <i class="fas fa-times text-xl"></i>
             </button>

             <div class="flex items-center justify-between h-16 px-4 border-b border-indigo-800">
                <div class="text-white font-bold text-2xl sidebar-title">SINC</div>
                <!-- Desktop Toggle Button -->
                <button id="toggleSidebar" class="text-white hover:bg-indigo-800 p-1 rounded hidden md:block">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto">
                <div class="pt-2">
                    <div class="px-4 py-3">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 rounded-full bg-indigo-700 flex items-center justify-center text-white">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="sidebar-user">
                                <div class="text-white font-medium">Sethu M</div>
                                <div class="text-indigo-300 text-sm">Attorney</div>
                            </div>
                        </div>
                    </div>
                    <nav class="mt-4 px-2">
                        <a href="#dashboard" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1 active" data-tab="dashboard">
                            <i class="fas fa-th-large icon w-5 text-center"></i>
                            <span class="sidebar-text">Dashboard</span>
                        </a>
                        <a href="#cases" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="cases">
                            <i class="fas fa-briefcase icon w-5 text-center"></i>
                            <span class="sidebar-text">Case Files</span>
                        </a>
                        <a href="#clients" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="clients">
                            <i class="fas fa-users icon w-5 text-center"></i>
                            <span class="sidebar-text">Clients</span>
                        </a>
                        <a href="#calendar" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="calendar">
                            <i class="fas fa-calendar-alt icon w-5 text-center"></i>
                            <span class="sidebar-text">Calendar</span>
                        </a>
                        <a href="#documents" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="documents">
                            <i class="fas fa-file-alt icon w-5 text-center"></i>
                            <span class="sidebar-text">Documents</span>
                        </a>
                        <a href="#tasks" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="tasks">
                            <i class="fas fa-tasks icon w-5 text-center"></i>
                            <span class="sidebar-text">Tasks</span>
                        </a>
                        <a href="#time" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="time">
                            <i class="fas fa-clock icon w-5 text-center"></i>
                            <span class="sidebar-text">Time Tracking</span>
                        </a>
                        <a href="#billing" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="billing">
                            <i class="fas fa-file-invoice-dollar icon w-5 text-center"></i>
                            <span class="sidebar-text">Billing</span>
                        </a>
                        <a href="#ai" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="ai">
                            <i class="fas fa-robot icon w-5 text-center"></i>
                            <span class="sidebar-text">AI Assistant</span>
                        </a>
                        <a href="#settings" class="sidebar-link flex items-center space-x-3 text-indigo-100 hover:bg-indigo-800 p-3 rounded mb-1" data-tab="settings">
                            <i class="fas fa-cog icon w-5 text-center"></i>
                            <span class="sidebar-text">Settings</span>
                        </a>
                    </nav>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Header -->
            <header class="bg-white border-b flex items-center justify-between h-16 px-4 md:px-6">
                <!-- Mobile Burger Menu Button -->
                <button id="mobileMenuButton" class="text-gray-600 focus:outline-none md:hidden mr-4">
                    <i class="fas fa-bars text-xl"></i>
                </button>

                <h1 id="currentViewTitle" class="text-lg sm:text-xl font-semibold truncate">Dashboard</h1>

                <div class="flex items-center space-x-2 sm:space-x-4 ml-auto">
                    <div class="relative hidden sm:block">
                        <input type="text" placeholder="Search..." class="pl-8 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 w-32 sm:w-48">
                        <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                    </div>
                    <button class="relative p-2 text-gray-400 hover:text-gray-600">
                        <i class="fas fa-bell"></i>
                        <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>
                    <div class="h-8 w-px bg-gray-200 hidden sm:block"></div>
                    <div class="flex items-center space-x-2 cursor-pointer">
                        <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white text-sm">
                            SM <!-- Initials instead of icon for better visibility on small size -->
                        </div>
                        <span class="hidden md:inline-block text-sm">Sethu M</span>
                        <i class="fas fa-chevron-down text-xs hidden md:inline-block"></i>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-auto p-4 md:p-6">
                <!-- Dashboard -->
                <div id="dashboard" class="tab-content active">
                    <!-- ... (Dashboard content remains unchanged) ... -->
                     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                        <div class="bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-center">
                                <h3 class="text-gray-500 font-medium">Active Cases</h3>
                                <span class="text-xs text-gray-400">This Month</span>
                            </div>
                            <div class="flex items-center justify-between mt-2">
                                <span class="text-2xl font-bold">23</span>
                                <span class="px-2 py-1 text-sm rounded bg-green-100 text-green-800 flex items-center">
                                    <i class="fas fa-arrow-up mr-1 text-xs"></i>
                                    +5
                                </span>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-center">
                                <h3 class="text-gray-500 font-medium">Tasks Due Today</h3>
                                <span class="text-xs text-gray-400">4 High Priority</span>
                            </div>
                            <div class="flex items-center justify-between mt-2">
                                <span class="text-2xl font-bold">8</span>
                                <span class="px-2 py-1 text-sm rounded bg-red-100 text-red-800 flex items-center">
                                    <i class="fas fa-arrow-down mr-1 text-xs"></i>
                                    -2
                                </span>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-center">
                                <h3 class="text-gray-500 font-medium">Billable Hours</h3>
                                <span class="text-xs text-gray-400">This Week</span>
                            </div>
                            <div class="flex items-center justify-between mt-2">
                                <span class="text-2xl font-bold">156.5</span>
                                <span class="px-2 py-1 text-sm rounded bg-green-100 text-green-800 flex items-center">
                                    <i class="fas fa-arrow-up mr-1 text-xs"></i>
                                    +12.5
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
                        <div class="lg:col-span-2 bg-white rounded-lg shadow p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-medium">Billable Hours Trend</h3>
                                <div class="flex space-x-2">
                                    <button class="px-2 py-1 text-xs rounded border text-gray-600 hover:bg-gray-50">Week</button>
                                    <button class="px-2 py-1 text-xs rounded border bg-indigo-50 text-indigo-600">Month</button>
                                    <button class="px-2 py-1 text-xs rounded border text-gray-600 hover:bg-gray-50">Year</button>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="billingChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <h3 class="font-medium mb-4">Case Distribution</h3>
                            <div class="h-64">
                                <canvas id="caseChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                        <div class="bg-white rounded-lg shadow lg:col-span-2 p-4"> <!-- Changed md:col-span-2 to lg:col-span-2 for better stacking -->
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-medium">Recent Activity</h3>
                                <button class="text-indigo-600 hover:text-indigo-800 text-sm">View All</button>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3 p-2 text-sm border-b hover:bg-gray-50 rounded">
                                    <i class="fas fa-file-alt text-indigo-500"></i>
                                    <div class="flex-1">
                                        <div>Document "Motion to Dismiss" updated in Case #C2023101</div>
                                        <div class="text-gray-500 text-xs mt-1">Updated by Elizabeth Chen</div>
                                    </div>
                                    <span class="text-gray-500 text-xs whitespace-nowrap">2h ago</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 text-sm border-b hover:bg-gray-50 rounded">
                                    <i class="fas fa-comment-alt text-green-500"></i>
                                    <div class="flex-1">
                                        <div>New comment added to Case #C2023104</div>
                                        <div class="text-gray-500 text-xs mt-1">Comment by Sethu M</div>
                                    </div>
                                    <span class="text-gray-500 text-xs whitespace-nowrap">5h ago</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 text-sm border-b hover:bg-gray-50 rounded">
                                    <i class="fas fa-calendar-alt text-blue-500"></i>
                                    <div class="flex-1">
                                        <div>Court Hearing scheduled for Case #C2023102</div>
                                        <div class="text-gray-500 text-xs mt-1">Added by Michael Johnson</div>
                                    </div>
                                    <span class="text-gray-500 text-xs whitespace-nowrap">Yesterday</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 text-sm hover:bg-gray-50 rounded">
                                    <i class="fas fa-user-plus text-purple-500"></i>
                                    <div class="flex-1">
                                        <div>New client added: Acme Corporation</div>
                                        <div class="text-gray-500 text-xs mt-1">Added by Sarah Williams</div>
                                    </div>
                                    <span class="text-gray-500 text-xs whitespace-nowrap">Yesterday</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-medium">Upcoming Deadlines</h3>
                                <button class="text-indigo-600 hover:text-indigo-800 text-sm">View All</button>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3 p-2 text-sm border-b hover:bg-gray-50 rounded">
                                    <i class="fas fa-exclamation-circle text-red-500"></i>
                                    <span class="flex-1 truncate">Motion Filing - Smith vs Jones</span>
                                    <span class="text-red-500 font-medium text-xs whitespace-nowrap">Today</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 text-sm border-b hover:bg-gray-50 rounded">
                                    <i class="fas fa-gavel text-orange-500"></i>
                                    <span class="flex-1 truncate">Court Hearing - Davidson Case</span>
                                    <span class="text-orange-500 font-medium text-xs whitespace-nowrap">Tomorrow</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 text-sm border-b hover:bg-gray-50 rounded">
                                    <i class="fas fa-file-contract text-blue-500"></i>
                                    <span class="flex-1 truncate">Contract Review - Acme Corp</span>
                                    <span class="text-blue-500 text-xs whitespace-nowrap">Apr 19</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 text-sm hover:bg-gray-50 rounded">
                                    <i class="fas fa-handshake text-green-500"></i>
                                    <span class="flex-1 truncate">Client Meeting - Johnson Family</span>
                                    <span class="text-blue-500 text-xs whitespace-nowrap">Apr 20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cases View -->
                <div id="cases" class="tab-content">
                    <!-- ... (Cases content remains unchanged - already uses responsive grid) ... -->
                    <div class="bg-white rounded-lg shadow p-4 mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 mb-4">
                            <div class="flex flex-1 max-w-md">
                                <div class="relative flex-1">
                                    <input type="search" placeholder="Search cases..." class="w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                    <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                                </div>
                                <button class="ml-2 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                    <i class="fas fa-filter text-gray-500"></i>
                                </button>
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                    <i class="fas fa-sort-amount-down text-gray-500 mr-1"></i>
                                    Sort
                                </button>
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    <i class="fas fa-plus mr-1"></i>
                                    New Case
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Case Cards -->
                                <div class="bg-white border rounded-lg shadow-sm p-4 case-card transition-all">
                                    <div class="flex items-start justify-between">
                                        <div>
                                            <span class="text-sm text-gray-500">#C2023101</span>
                                            <h3 class="mt-1 font-medium">Smith vs Jones</h3>
                                            <p class="text-sm text-gray-500 mt-1">Personal Injury</p>
                                        </div>
                                        <div class="dropdown relative">
                                            <button class="p-1 text-gray-500 hover:bg-gray-100 rounded">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <!-- Add dropdown menu here if needed -->
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>Progress</span>
                                            <span>65%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-value" style="width: 65%"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center -space-x-1"> <!-- Use negative space for overlap -->
                                            <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs border-2 border-white">JS</div>
                                            <div class="w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs border-2 border-white">EC</div>
                                        </div>
                                        <div class="text-xs text-gray-500">Updated Apr 16</div>
                                    </div>
                                    <div class="flex gap-2 mt-3 flex-wrap"> <!-- Added flex-wrap -->
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded tag">Active</span>
                                        <span class="px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded tag">High Priority</span>
                                    </div>
                                </div>
                                <div class="bg-white border rounded-lg shadow-sm p-4 case-card transition-all">
                                    <div class="flex items-start justify-between">
                                        <div>
                                            <span class="text-sm text-gray-500">#C2023102</span>
                                            <h3 class="mt-1 font-medium">Davidson Estate</h3>
                                            <p class="text-sm text-gray-500 mt-1">Estate Planning</p>
                                        </div>
                                        <div class="dropdown relative">
                                            <button class="p-1 text-gray-500 hover:bg-gray-100 rounded">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>Progress</span>
                                            <span>40%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-value" style="width: 40%"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center -space-x-1">
                                             <div class="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-xs border-2 border-white">MJ</div>
                                        </div>
                                        <div class="text-xs text-gray-500">Updated Apr 15</div>
                                    </div>
                                    <div class="flex gap-2 mt-3 flex-wrap">
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded tag">Active</span>
                                        <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded tag">Medium Priority</span>
                                    </div>
                                </div>
                                <div class="bg-white border rounded-lg shadow-sm p-4 case-card transition-all">
                                    <div class="flex items-start justify-between">
                                        <div>
                                            <span class="text-sm text-gray-500">#C2023103</span>
                                            <h3 class="mt-1 font-medium">Wilson vs City</h3>
                                            <p class="text-sm text-gray-500 mt-1">Municipal Litigation</p>
                                        </div>
                                        <div class="dropdown relative">
                                            <button class="p-1 text-gray-500 hover:bg-gray-100 rounded">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>Progress</span>
                                            <span>85%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-value" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center -space-x-1">
                                            <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs border-2 border-white">JS</div>
                                            <div class="w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white text-xs border-2 border-white">SW</div>
                                        </div>
                                        <div class="text-xs text-gray-500">Updated Apr 14</div>
                                    </div>
                                    <div class="flex gap-2 mt-3 flex-wrap">
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded tag">Active</span>
                                        <span class="px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded tag">High Priority</span>
                                    </div>
                                </div>
                                <div class="bg-white border rounded-lg shadow-sm p-4 case-card transition-all">
                                    <div class="flex items-start justify-between">
                                        <div>
                                            <span class="text-sm text-gray-500">#C2023104</span>
                                            <h3 class="mt-1 font-medium">Acme Corporation</h3>
                                            <p class="text-sm text-gray-500 mt-1">Corporate Law</p>
                                        </div>
                                        <div class="dropdown relative">
                                            <button class="p-1 text-gray-500 hover:bg-gray-100 rounded">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>Progress</span>
                                            <span>20%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-value" style="width: 20%"></div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center -space-x-1">
                                             <div class="w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs border-2 border-white">EC</div>
                                            <div class="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-xs border-2 border-white">MJ</div>
                                        </div>
                                        <div class="text-xs text-gray-500">Updated Apr 12</div>
                                    </div>
                                    <div class="flex gap-2 mt-3 flex-wrap">
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded tag">Active</span>
                                        <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded tag">Medium Priority</span>
                                    </div>
                                    </div>

                                    <div class="bg-white border rounded-lg shadow-sm p-4 case-card transition-all">
                                        <div class="flex items-start justify-between">
                                            <div>
                                                <span class="text-sm text-gray-500">#C2023105</span>
                                                <h3 class="mt-1 font-medium">Johnson Family Trust</h3>
                                                <p class="text-sm text-gray-500 mt-1">Estate Planning</p>
                                            </div>
                                            <div class="dropdown relative">
                                                <button class="p-1 text-gray-500 hover:bg-gray-100 rounded">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <div class="flex justify-between text-sm mb-1">
                                                <span>Progress</span>
                                                <span>50%</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-value" style="width: 50%"></div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between mt-3">
                                            <div class="flex items-center -space-x-1">
                                                <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs border-2 border-white">JS</div>
                                            </div>
                                            <div class="text-xs text-gray-500">Updated Apr 10</div>
                                        </div>
                                        <div class="flex gap-2 mt-3 flex-wrap">
                                            <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded tag">Active</span>
                                            <span class="px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded tag">Low Priority</span>
                                        </div>
                                    </div>
                                </div>
                    </div>
                 </div>

                <!-- Clients View -->
                <div id="clients" class="tab-content">
                     <!-- ... (Clients content remains unchanged - table needs overflow-x-auto) ... -->
                    <div class="bg-white rounded-lg shadow p-4 mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 mb-4">
                            <div class="flex flex-1 max-w-md">
                                <div class="relative flex-1">
                                    <input type="search" placeholder="Search clients..." class="w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                    <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                                </div>
                                <button class="ml-2 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                    <i class="fas fa-filter text-gray-500"></i>
                                </button>
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    <i class="fas fa-plus mr-1"></i>
                                    New Client
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto"> <!-- Ensure horizontal scroll on small screens -->
                            <table class="min-w-full">
                                <thead>
                                    <tr class="bg-gray-50"> <!-- Added background for header -->
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell">Type</th> <!-- Hide on extra small -->
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Cases</th> <!-- Hide on small -->
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-500">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">John Smith</div>
                                                    <div class="text-sm text-gray-500 sm:hidden">Individual</div> <!-- Show type below name on mobile -->
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 truncate">john.smith@example.com</div>
                                            <div class="text-sm text-gray-500">(555) 123-4567</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <div class="text-sm text-gray-900">Individual</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap hidden md:table-cell">
                                            <div class="text-sm text-gray-900">1 Active</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex space-x-2">
                                                <button class="text-indigo-600 hover:text-indigo-900"><i class="fas fa-edit"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900"><i class="fas fa-eye"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 hidden sm:inline-block"><i class="fas fa-ellipsis-v"></i></button> <!-- Hide ellipsis on xs -->
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                         <td class="px-4 py-3 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-500">
                                                    <i class="fas fa-building"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">Acme Corporation</div>
                                                    <div class="text-sm text-gray-500 sm:hidden">Corporation</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 truncate">info@acmecorp.com</div>
                                            <div class="text-sm text-gray-500">(555) 987-6543</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <div class="text-sm text-gray-900">Corporation</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap hidden md:table-cell">
                                            <div class="text-sm text-gray-900">2 Active</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex space-x-2">
                                                <button class="text-indigo-600 hover:text-indigo-900"><i class="fas fa-edit"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900"><i class="fas fa-eye"></i></button>
                                                 <button class="text-gray-600 hover:text-gray-900 hidden sm:inline-block"><i class="fas fa-ellipsis-v"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                         <td class="px-4 py-3 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-green-100 flex items-center justify-center text-green-500">
                                                    <i class="fas fa-users"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">Johnson Family</div>
                                                     <div class="text-sm text-gray-500 sm:hidden">Family</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <div class="text-sm text-gray-900 truncate">robert.johnson@example.com</div>
                                            <div class="text-sm text-gray-500">(555) 345-6789</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <div class="text-sm text-gray-900">Family</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap hidden md:table-cell">
                                            <div class="text-sm text-gray-900">1 Active</div>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex space-x-2">
                                                <button class="text-indigo-600 hover:text-indigo-900"><i class="fas fa-edit"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900"><i class="fas fa-eye"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 hidden sm:inline-block"><i class="fas fa-ellipsis-v"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <!-- More client rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Calendar View -->
                <div id="calendar" class="tab-content">
                    <!-- ... (Calendar content remains unchanged) ... -->
                    <div class="bg-white rounded-lg shadow p-4">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
                            <div class="flex items-center">
                                <h3 class="text-lg font-medium mr-2">April 2025</h3>
                                <div class="flex items-center">
                                    <button class="p-1 text-gray-500 hover:bg-gray-100 rounded-full">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="p-1 text-gray-500 hover:bg-gray-100 rounded-full ml-2">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex space-x-1 sm:space-x-2 mt-2 md:mt-0 flex-wrap"> <!-- Added flex-wrap -->
                                <button class="px-2 sm:px-3 py-1 text-xs border rounded text-gray-600 hover:bg-gray-50">Day</button>
                                <button class="px-2 sm:px-3 py-1 text-xs border rounded text-gray-600 hover:bg-gray-50">Week</button>
                                <button class="px-2 sm:px-3 py-1 text-xs border rounded bg-indigo-50 text-indigo-600">Month</button>
                                <button class="px-3 sm:px-4 py-1 bg-indigo-600 text-white rounded text-xs hover:bg-indigo-700">
                                    <i class="fas fa-plus mr-1 hidden sm:inline"></i> <!-- Hide icon on xs -->
                                    Event
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-7 gap-1 text-center text-xs sm:text-sm font-medium text-gray-500">
                            <div>Sun</div> <div>Mon</div> <div>Tue</div> <div>Wed</div> <div>Thu</div> <div>Fri</div> <div>Sat</div>
                        </div>
                        <div class="grid grid-cols-7 gap-1 mt-1 text-xs sm:text-sm"> <!-- Adjusted font size -->
                            <div class="calendar-day p-1 text-center calendar-day-disabled">31</div>
                            <div class="calendar-day p-1 text-center">1</div>
                            <div class="calendar-day p-1 text-center">2</div>
                            <div class="calendar-day p-1 text-center">3</div>
                            <div class="calendar-day p-1 text-center">4</div>
                            <div class="calendar-day p-1 text-center">5</div>
                            <div class="calendar-day p-1 text-center">6</div>
                            <div class="calendar-day p-1 text-center">7</div>
                            <div class="calendar-day p-1 text-center">8</div>
                            <div class="calendar-day p-1 text-center">9</div>
                            <div class="calendar-day p-1 text-center">10</div>
                            <div class="calendar-day p-1 text-center">11</div>
                            <div class="calendar-day p-1 text-center">12</div>
                            <div class="calendar-day p-1 text-center">13</div>
                            <div class="calendar-day p-1 text-center">14</div>
                            <div class="calendar-day p-1 text-center">15</div>
                            <div class="calendar-day p-1 text-center">16</div>
                            <div class="calendar-day p-1 text-center calendar-day-today">17</div>
                            <div class="calendar-day p-1 text-center calendar-day-event">18</div>
                            <div class="calendar-day p-1 text-center calendar-day-event">19</div>
                            <div class="calendar-day p-1 text-center calendar-day-event">20</div>
                            <div class="calendar-day p-1 text-center">21</div>
                            <div class="calendar-day p-1 text-center">22</div>
                            <div class="calendar-day p-1 text-center">23</div>
                            <div class="calendar-day p-1 text-center calendar-day-event">24</div>
                            <div class="calendar-day p-1 text-center">25</div>
                            <div class="calendar-day p-1 text-center">26</div>
                            <div class="calendar-day p-1 text-center">27</div>
                            <div class="calendar-day p-1 text-center">28</div>
                            <div class="calendar-day p-1 text-center">29</div>
                            <div class="calendar-day p-1 text-center">30</div>
                            <div class="calendar-day p-1 text-center calendar-day-disabled">1</div>
                        </div>

                        <div class="mt-6">
                            <h4 class="font-medium mb-3">Upcoming Events</h4>
                            <div class="space-y-3">
                                <div class="flex items-center p-3 border rounded-lg hover:bg-gray-50">
                                    <div class="w-1 h-10 bg-red-500 rounded-full mr-3"></div>
                                    <div class="flex-1 overflow-hidden"> <!-- Prevent overflow -->
                                        <div class="flex justify-between">
                                            <h5 class="font-medium text-sm truncate">Motion Filing Deadline</h5>
                                            <span class="text-xs text-gray-500 whitespace-nowrap ml-2">9:00 AM</span>
                                        </div>
                                        <p class="text-xs text-gray-500 truncate">Smith vs Jones</p>
                                    </div>
                                </div>
                                <div class="flex items-center p-3 border rounded-lg hover:bg-gray-50">
                                    <div class="w-1 h-10 bg-blue-500 rounded-full mr-3"></div>
                                     <div class="flex-1 overflow-hidden">
                                        <div class="flex justify-between">
                                            <h5 class="font-medium text-sm truncate">Client Meeting</h5>
                                            <span class="text-xs text-gray-500 whitespace-nowrap ml-2">2:00 PM</span>
                                        </div>
                                        <p class="text-xs text-gray-500 truncate">Acme Corporation</p>
                                    </div>
                                </div>
                                <div class="flex items-center p-3 border rounded-lg hover:bg-gray-50">
                                    <div class="w-1 h-10 bg-green-500 rounded-full mr-3"></div>
                                     <div class="flex-1 overflow-hidden">
                                        <div class="flex justify-between">
                                            <h5 class="font-medium text-sm truncate">Court Hearing</h5>
                                            <span class="text-xs text-gray-500 whitespace-nowrap ml-2">10:30 AM</span>
                                        </div>
                                        <p class="text-xs text-gray-500 truncate">Davidson Case</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documents View -->
                <div id="documents" class="tab-content">
                     <!-- ... (Documents content remains unchanged - mobile view looks acceptable) ... -->
                    <div class="bg-white rounded-lg shadow p-4">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 mb-4">
                            <div class="flex flex-1 max-w-md">
                                <div class="relative flex-1">
                                    <input type="search" placeholder="Search documents..." class="w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                    <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                                </div>
                                <button class="ml-2 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                    <i class="fas fa-filter text-gray-500"></i>
                                </button>
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-3 py-2 text-sm border rounded-lg text-gray-600 hover:bg-gray-50">
                                    <i class="fas fa-folder-plus mr-1"></i>
                                    <span class="hidden sm:inline">Folder</span> <!-- Hide text on xs -->
                                </button>
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    <i class="fas fa-upload mr-1"></i>
                                    Upload
                                </button>
                            </div>
                        </div>

                        <div class="border rounded-lg overflow-hidden">
                            <!-- Header Row - Hide less important cols on mobile -->
                            <div class="flex items-center py-2 px-4 bg-gray-50 border-b">
                                <div class="flex-1 font-medium text-xs sm:text-sm">Name</div>
                                <div class="w-24 sm:w-32 font-medium text-xs sm:text-sm hidden md:block">Case</div> <!-- Hide on sm -->
                                <div class="w-24 sm:w-32 font-medium text-xs sm:text-sm">Modified</div>
                                <div class="w-16 sm:w-20 font-medium text-xs sm:text-sm hidden sm:block">Size</div> <!-- Hide on xs -->
                                <div class="w-12 sm:w-16"></div>
                            </div>

                            <!-- Document Rows -->
                            <div class="document-card flex items-center py-3 px-4 border-b">
                                <div class="flex-1 flex items-center overflow-hidden mr-2"> <!-- Added overflow hidden -->
                                    <i class="fas fa-file-pdf text-red-500 mr-2 sm:mr-3 flex-shrink-0"></i> <!-- Added shrink -->
                                    <span class="truncate text-xs sm:text-sm">Motion to Dismiss.pdf</span>
                                </div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 hidden md:block truncate">Smith vs Jones</div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 whitespace-nowrap">Apr 16, 2025</div>
                                <div class="w-16 sm:w-20 text-xs sm:text-sm text-gray-500 hidden sm:block">1.2 MB</div>
                                <div class="w-12 sm:w-16 flex justify-end">
                                    <button class="text-gray-500 hover:text-gray-700 p-1">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="document-card flex items-center py-3 px-4 border-b">
                                <div class="flex-1 flex items-center overflow-hidden mr-2">
                                    <i class="fas fa-file-word text-blue-500 mr-2 sm:mr-3 flex-shrink-0"></i>
                                    <span class="truncate text-xs sm:text-sm">Client Contract - Acme Corp.docx</span>
                                </div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 hidden md:block truncate">Acme Corp</div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 whitespace-nowrap">Apr 15, 2025</div>
                                <div class="w-16 sm:w-20 text-xs sm:text-sm text-gray-500 hidden sm:block">843 KB</div>
                                <div class="w-12 sm:w-16 flex justify-end">
                                     <button class="text-gray-500 hover:text-gray-700 p-1">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                             <div class="document-card flex items-center py-3 px-4 border-b">
                                <div class="flex-1 flex items-center overflow-hidden mr-2">
                                    <i class="fas fa-file-excel text-green-500 mr-2 sm:mr-3 flex-shrink-0"></i>
                                    <span class="truncate text-xs sm:text-sm">Case Expenses.xlsx</span>
                                </div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 hidden md:block truncate">Davidson Estate</div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 whitespace-nowrap">Apr 14, 2025</div>
                                <div class="w-16 sm:w-20 text-xs sm:text-sm text-gray-500 hidden sm:block">412 KB</div>
                                <div class="w-12 sm:w-16 flex justify-end">
                                     <button class="text-gray-500 hover:text-gray-700 p-1">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                             <div class="document-card flex items-center py-3 px-4 border-b">
                                <div class="flex-1 flex items-center overflow-hidden mr-2">
                                    <i class="fas fa-file-image text-purple-500 mr-2 sm:mr-3 flex-shrink-0"></i>
                                    <span class="truncate text-xs sm:text-sm">Evidence Photos.zip</span>
                                </div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 hidden md:block truncate">Wilson vs City</div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 whitespace-nowrap">Apr 12, 2025</div>
                                <div class="w-16 sm:w-20 text-xs sm:text-sm text-gray-500 hidden sm:block">24.5 MB</div>
                                <div class="w-12 sm:w-16 flex justify-end">
                                     <button class="text-gray-500 hover:text-gray-700 p-1">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                             <div class="document-card flex items-center py-3 px-4">
                                <div class="flex-1 flex items-center overflow-hidden mr-2">
                                    <i class="fas fa-file-pdf text-red-500 mr-2 sm:mr-3 flex-shrink-0"></i>
                                    <span class="truncate text-xs sm:text-sm">Trust Agreement.pdf</span>
                                </div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 hidden md:block truncate">Johnson Family</div>
                                <div class="w-24 sm:w-32 text-xs sm:text-sm text-gray-500 whitespace-nowrap">Apr 10, 2025</div>
                                <div class="w-16 sm:w-20 text-xs sm:text-sm text-gray-500 hidden sm:block">3.7 MB</div>
                                <div class="w-12 sm:w-16 flex justify-end">
                                     <button class="text-gray-500 hover:text-gray-700 p-1">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tasks View -->
                <div id="tasks" class="tab-content">
                     <!-- ... (Tasks content remains unchanged - needs overflow-x-auto for table) ... -->
                    <div class="bg-white rounded-lg shadow p-4">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 mb-4">
                            <div class="flex flex-1 max-w-md">
                                <div class="relative flex-1">
                                    <input type="search" placeholder="Search tasks..." class="w-full pl-10 pr-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                    <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                                </div>
                                <button class="ml-2 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                    <i class="fas fa-filter text-gray-500"></i>
                                </button>
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    <i class="fas fa-plus mr-1"></i>
                                    Add Task
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto border rounded-lg"> <!-- Added overflow-x -->
                            <table class="min-w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-2 sm:px-4 py-3 w-12"></th> <!-- Checkbox col -->
                                        <th class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task</th>
                                        <th class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Case</th>
                                        <th class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Due Date</th>
                                        <th class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell">Priority</th>
                                        <th class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">Assignee</th>
                                        <th class="px-2 sm:px-4 py-3 w-16"></th> <!-- Actions col -->
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                                            File Motion to Dismiss
                                            <div class="text-xs text-gray-500 md:hidden">Smith vs Jones</div> <!-- Show case below on mobile -->
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell">Smith vs Jones</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-red-500 font-medium">Today</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">High</span>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell">Sethu M</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-right">
                                            <button class="text-gray-500 hover:text-gray-700 p-1">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                                            Prepare for Court Hearing
                                            <div class="text-xs text-gray-500 md:hidden">Davidson Case</div>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell">Davidson Case</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-orange-500 font-medium">Tomorrow</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <span class="px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-800">Medium</span>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell">Michael Johnson</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-right">
                                             <button class="text-gray-500 hover:text-gray-700 p-1">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                                            Review Client Contract
                                            <div class="text-xs text-gray-500 md:hidden">Acme Corp</div>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell">Acme Corp</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-blue-500">Apr 19</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">Low</span>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell">Elizabeth Chen</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-right">
                                             <button class="text-gray-500 hover:text-gray-700 p-1">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </td>
                                    </tr>
                                     <tr class="hover:bg-gray-50">
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" checked>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 line-through">
                                            Draft Witness Questions
                                            <div class="text-xs text-gray-400 md:hidden">Wilson vs City</div>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell line-through">Wilson vs City</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 line-through">Apr 15</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <span class="px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-800 opacity-70">Medium</span>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell line-through">Sethu M</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-right">
                                             <button class="text-gray-500 hover:text-gray-700 p-1">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </td>
                                    </tr>
                                     <tr class="hover:bg-gray-50">
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                                            Follow up with Johnson Family
                                            <div class="text-xs text-gray-500 md:hidden">Johnson Family Trust</div>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell">Johnson Family Trust</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-blue-500">Apr 22</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap hidden sm:table-cell">
                                            <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">Low</span>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell">Sarah Williams</td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-sm text-right">
                                             <button class="text-gray-500 hover:text-gray-700 p-1">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <!-- More task rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Time Tracking View -->
                <div id="time" class="tab-content">
                    <!-- ... (Time Tracking content remains unchanged - uses responsive grid) ... -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                        <div class="lg:col-span-1 bg-white rounded-lg shadow p-4">
                            <h3 class="font-medium mb-4">Start Timer</h3>
                            <div class="mb-3">
                                <label for="timer-case" class="block text-sm font-medium text-gray-700">Select Case</label>
                                <select id="timer-case" name="timer-case" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                                    <option>Smith vs Jones</option>
                                    <option>Davidson Estate</option>
                                    <option>Acme Corporation</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label for="timer-description" class="block text-sm font-medium text-gray-700">Description (Optional)</label>
                                <input type="text" id="timer-description" name="timer-description" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="e.g., Drafting motion">
                            </div>
                            <div class="bg-gray-100 rounded-lg p-4 text-center mb-4">
                                <div id="timerDisplay" class="timer-display text-gray-700 font-bold">00:00:00</div>
                            </div>
                            <div class="flex justify-center space-x-2 sm:space-x-3">
                                <button id="startTimerBtn" class="px-4 sm:px-6 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center space-x-2">
                                    <i class="fas fa-play"></i>
                                    <span>Start</span>
                                </button>
                                <button id="stopTimerBtn" class="px-4 sm:px-6 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 flex items-center space-x-2 hidden">
                                    <i class="fas fa-stop"></i>
                                    <span class="hidden sm:inline">Stop</span><span class="sm:hidden">& Save</span>
                                </button>
                                <button id="pauseTimerBtn" class="px-4 sm:px-6 py-2 bg-yellow-500 text-white rounded-lg text-sm hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 flex items-center space-x-2 hidden">
                                    <i class="fas fa-pause"></i>
                                    <span>Pause</span>
                                </button>
                            </div>
                        </div>
                        <div class="lg:col-span-2 bg-white rounded-lg shadow p-4">
                            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 space-y-2 sm:space-y-0">
                                <h3 class="font-medium">Recent Time Entries</h3>
                                <button class="w-full sm:w-auto px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg text-sm hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    <i class="fas fa-plus mr-1"></i>
                                    Add Manual Entry
                                </button>
                            </div>
                            <div class="space-y-2">
                                <div class="time-entry flex flex-wrap sm:flex-nowrap items-center p-3 border rounded-lg gap-y-1 gap-x-2">
                                    <div class="flex-1 w-full sm:w-auto min-w-0"> <!-- Allow shrinking/wrapping -->
                                        <div class="font-medium text-sm truncate">Researching precedents</div>
                                        <div class="text-xs text-gray-500 truncate">Smith vs Jones</div>
                                    </div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-500 text-left sm:text-right whitespace-nowrap">Apr 17</div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-700 font-medium text-left sm:text-right whitespace-nowrap">1h 30m</div>
                                    <div class="w-full sm:w-16 flex justify-end space-x-2 ml-auto">
                                        <button class="text-gray-500 hover:text-gray-700 p-1"><i class="fas fa-pencil-alt"></i></button>
                                        <button class="text-red-500 hover:text-red-700 p-1"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                               <div class="time-entry flex flex-wrap sm:flex-nowrap items-center p-3 border rounded-lg gap-y-1 gap-x-2">
                                    <div class="flex-1 w-full sm:w-auto min-w-0">
                                        <div class="font-medium text-sm truncate">Client call</div>
                                        <div class="text-xs text-gray-500 truncate">Acme Corporation</div>
                                    </div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-500 text-left sm:text-right whitespace-nowrap">Apr 16</div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-700 font-medium text-left sm:text-right whitespace-nowrap">0h 45m</div>
                                    <div class="w-full sm:w-16 flex justify-end space-x-2 ml-auto">
                                        <button class="text-gray-500 hover:text-gray-700 p-1"><i class="fas fa-pencil-alt"></i></button>
                                        <button class="text-red-500 hover:text-red-700 p-1"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                               <div class="time-entry flex flex-wrap sm:flex-nowrap items-center p-3 border rounded-lg gap-y-1 gap-x-2">
                                    <div class="flex-1 w-full sm:w-auto min-w-0">
                                        <div class="font-medium text-sm truncate">Drafting trust documents</div>
                                        <div class="text-xs text-gray-500 truncate">Johnson Family Trust</div>
                                    </div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-500 text-left sm:text-right whitespace-nowrap">Apr 16</div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-700 font-medium text-left sm:text-right whitespace-nowrap">2h 15m</div>
                                    <div class="w-full sm:w-16 flex justify-end space-x-2 ml-auto">
                                        <button class="text-gray-500 hover:text-gray-700 p-1"><i class="fas fa-pencil-alt"></i></button>
                                        <button class="text-red-500 hover:text-red-700 p-1"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                               <div class="time-entry flex flex-wrap sm:flex-nowrap items-center p-3 border rounded-lg gap-y-1 gap-x-2">
                                    <div class="flex-1 w-full sm:w-auto min-w-0">
                                        <div class="font-medium text-sm truncate">Preparing court filings</div>
                                        <div class="text-xs text-gray-500 truncate">Davidson Estate</div>
                                    </div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-500 text-left sm:text-right whitespace-nowrap">Apr 15</div>
                                    <div class="w-auto sm:w-20 text-xs sm:text-sm text-gray-700 font-medium text-left sm:text-right whitespace-nowrap">3h 00m</div>
                                    <div class="w-full sm:w-16 flex justify-end space-x-2 ml-auto">
                                        <button class="text-gray-500 hover:text-gray-700 p-1"><i class="fas fa-pencil-alt"></i></button>
                                        <button class="text-red-500 hover:text-red-700 p-1"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Billing View -->
                <div id="billing" class="tab-content">
                    <!-- ... (Billing content remains unchanged - needs overflow-x-auto for table) ... -->
                     <div class="bg-white rounded-lg shadow p-4">
                         <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0 mb-4">
                            <h3 class="text-lg font-medium">Invoices</h3>
                            <div class="flex space-x-2">
                                <button class="px-3 py-2 text-sm border rounded-lg text-gray-600 hover:bg-gray-50">
                                    <i class="fas fa-file-export mr-1"></i>
                                    Export
                                </button>
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    <i class="fas fa-plus mr-1"></i>
                                    Create Invoice
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="border p-4 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Total Outstanding</div>
                                <div class="text-xl sm:text-2xl font-bold">R15,875.00</div>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Overdue</div>
                                <div class="text-xl sm:text-2xl font-bold text-red-600">R3,120.00</div>
                            </div>
                            <div class="border p-4 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Paid (Last 30 days)</div>
                                <div class="text-xl sm:text-2xl font-bold text-green-600">R22,500.00</div>
                            </div>
                        </div>

                        <div class="overflow-x-auto border rounded-lg">
                            <table class="min-w-full">
                                <thead>
                                    <tr class="bg-gray-50">
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Invoice #</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell">Date</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Due Date</th>
                                        <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm font-medium text-indigo-600">INV-00123</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900">Acme Corporation</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden sm:table-cell">Apr 1, 2025</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-500">May 1, 2025</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900 text-right">R5,500.00</td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Sent</span>
                                        </td>
                                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex space-x-1 sm:space-x-2">
                                                <button class="text-gray-600 hover:text-gray-900 p-1" title="View"><i class="fas fa-eye"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 p-1" title="Download"><i class="fas fa-download"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 p-1 hidden sm:inline-block" title="More"><i class="fas fa-ellipsis-v"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm font-medium text-indigo-600">INV-00122</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900">John Smith</td>
                                         <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden sm:table-cell">Mar 15, 2025</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-red-500">Apr 15, 2025</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900 text-right">R3,120.00</td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Overdue</span>
                                        </td>
                                         <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex space-x-1 sm:space-x-2">
                                                <button class="text-gray-600 hover:text-gray-900 p-1" title="View"><i class="fas fa-eye"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 p-1" title="Download"><i class="fas fa-download"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 p-1 hidden sm:inline-block" title="More"><i class="fas fa-ellipsis-v"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                   <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm font-medium text-indigo-600">INV-00121</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900">Davidson Estate</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden sm:table-cell">Mar 10, 2025</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-500">Apr 10, 2025</td>
                                        <td class="px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900 text-right">R7,255.00</td>
                                        <td class="px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Paid</span>
                                        </td>
                                         <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex space-x-1 sm:space-x-2">
                                                <button class="text-gray-600 hover:text-gray-900 p-1" title="View"><i class="fas fa-eye"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 p-1" title="Download"><i class="fas fa-download"></i></button>
                                                <button class="text-gray-600 hover:text-gray-900 p-1 hidden sm:inline-block" title="More"><i class="fas fa-ellipsis-v"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <!-- More invoice rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                 </div>

                <!-- AI Assistant View -->
                <div id="ai" class="tab-content">
                     <!-- ... (AI content remains unchanged - should be reasonably responsive) ... -->
                    <div class="flex flex-col h-full bg-white rounded-lg shadow overflow-hidden">
                        <div class="p-4 border-b">
                            <h3 class="font-medium flex items-center">
                                <i class="fas fa-robot mr-2 text-indigo-600"></i>
                                AI Legal Assistant
                            </h3>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-4">
                            <!-- Chat messages -->
                            <div class="flex justify-start">
                                <div class="bg-gray-100 rounded-lg p-3 max-w-xs sm:max-w-lg message-ai">
                                    <p class="text-sm">Hello Sethu! How can I assist you today? I can help with legal research, document drafting, case summarization, and more.</p>
                                    <span class="text-xs text-gray-500 mt-1 block">SINC AI - 9:05 AM</span>
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <div class="bg-indigo-50 rounded-lg p-3 max-w-xs sm:max-w-lg message-user">
                                    <p class="text-sm">Summarize the key points of the opposing counsel's latest filing in Smith vs Jones (Doc ID: D12345).</p>
                                     <span class="text-xs text-gray-500 mt-1 block text-right">You - 9:06 AM</span>
                                </div>
                            </div>
                             <div class="flex justify-start">
                                <div class="bg-gray-100 rounded-lg p-3 max-w-xs sm:max-w-lg message-ai">
                                    <p class="text-sm">Okay, processing document D12345...</p>
                                    <p class="text-sm mt-2">Here's a summary of the key points:</p>
                                    <ul class="list-disc list-inside text-sm mt-1 space-y-1">
                                        <li>Argument 1: Lack of sufficient evidence for claim X.</li>
                                        <li>Argument 2: Statute of limitations has expired for claim Y.</li>
                                        <li>Argument 3: Procedural error in the initial filing.</li>
                                        <li>Relief Sought: Dismissal of claims X and Y.</li>
                                    </ul>
                                     <span class="text-xs text-gray-500 mt-1 block">SINC AI - 9:07 AM</span>
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <div class="bg-indigo-50 rounded-lg p-3 max-w-xs sm:max-w-lg message-user">
                                    <p class="text-sm">Thanks. Now, draft a response arguing against the statute of limitations defense for claim Y, citing relevant case law in this jurisdiction.</p>
                                     <span class="text-xs text-gray-500 mt-1 block text-right">You - 9:08 AM</span>
                                </div>
                            </div>
                             <div class="flex justify-start">
                                <div class="bg-gray-100 rounded-lg p-3 max-w-xs sm:max-w-lg message-ai">
                                    <p class="text-sm">Certainly. Researching relevant case law and drafting response...</p>
                                    <div class="mt-2 p-2 border rounded bg-white">
                                        <p class="text-xs font-semibold text-gray-600 mb-1">Draft Response Snippet:</p>
                                        <p class="text-sm font-mono text-gray-800 text-xs sm:text-sm break-words"> <!-- Added break-words -->
                                            "Opposing counsel contends that the statute of limitations bars Claim Y. However, this argument fails to consider the discovery rule applicable under [Jurisdiction] law. As established in <em>Case v. Precedent (Year)</em>, the statute does not begin to run until the plaintiff knew or reasonably should have known of the injury. In the present matter, discovery..."
                                        </p>
                                    </div>
                                     <span class="text-xs text-gray-500 mt-1 block">SINC AI - 9:10 AM</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 border-t bg-gray-50">
                            <div class="relative">
                                <input type="text" placeholder="Type your message here..." class="w-full pr-10 pl-4 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <button class="absolute right-3 top-2.5 text-indigo-600 hover:text-indigo-800">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings View -->
                <div id="settings" class="tab-content">
                    <!-- ... (Settings content remains unchanged - should be reasonably responsive) ... -->
                     <div class="bg-white rounded-lg shadow p-4">
                        <h3 class="text-xl font-medium mb-4">Settings</h3>
                         <!-- Settings Tabs - make scrollable on mobile -->
                        <div class="border-b mb-6 overflow-x-auto whitespace-nowrap">
                            <div class="inline-block">
                                <button class="py-2 px-4 text-sm font-medium text-indigo-600 border-b-2 border-indigo-600" data-setting-tab="profile">Profile</button>
                                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent" data-setting-tab="billing-settings">Billing</button>
                                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent" data-setting-tab="integrations">Integrations</button>
                                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent" data-setting-tab="notifications">Notifications</button>
                                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 border-b-2 border-transparent" data-setting-tab="security">Security</button>
                            </div>
                        </div>

                        <!-- Profile Settings -->
                        <div id="profile-settings" class="setting-content active">
                            <h4 class="text-lg font-medium mb-4">User Profile</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="profile-name" class="block text-sm font-medium text-gray-700">Full Name</label>
                                    <input type="text" id="profile-name" value="Sethu Mkhwanazi" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                    <label for="profile-email" class="block text-sm font-medium text-gray-700">Email Address</label>
                                    <input type="email" id="profile-email" value="Sethu.example@lawfirm.com" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                    <label for="profile-title" class="block text-sm font-medium text-gray-700">Job Title</label>
                                    <input type="text" id="profile-title" value="Attorney" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                    <label for="profile-phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                    <input type="tel" id="profile-phone" value="(555) 555-1212" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Save Changes</button>
                            </div>
                        </div>

                        <!-- Billing Settings -->
                        <div id="billing-settings" class="setting-content">
                            <h4 class="text-lg font-medium mb-4">Billing Settings</h4>
                            <div>
                                <label for="hourly-rate" class="block text-sm font-medium text-gray-700">Default Hourly Rate (R)</label>
                                <input type="number" id="hourly-rate" value="350" class="mt-1 block w-full sm:w-1/2 md:w-1/3 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            </div>
                            <div class="mt-4">
                                <span class="block text-sm font-medium text-gray-700 mb-2">Payment Methods Accepted</span>
                                <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-indigo-600 border-gray-300 rounded" checked>
                                        <span class="ml-2 text-sm text-gray-600">Credit Card</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-indigo-600 border-gray-300 rounded" checked>
                                        <span class="ml-2 text-sm text-gray-600">ACH Transfer</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                        <span class="ml-2 text-sm text-gray-600">Check</span>
                                    </label>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Save Changes</button>
                            </div>
                        </div>

                        <!-- Integrations Settings -->
                        <div id="integrations-settings" class="setting-content">
                                <h4 class="text-lg font-medium mb-4">Integrations</h4>
                                <p class="text-sm text-gray-600 mb-4">Connect SINC with other applications you use.</p>
                                <div class="space-y-4">
                                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2">
                                        <div class="flex items-center space-x-3">
                                            <i class="fab fa-google text-2xl text-red-500"></i>
                                            <span class="font-medium text-sm">Google Calendar</span>
                                        </div>
                                        <button class="w-full sm:w-auto px-3 py-1 text-xs border rounded-lg text-green-600 border-green-600 bg-green-50 hover:bg-green-100 whitespace-nowrap">Connected</button>
                                    </div>
                                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2">
                                        <div class="flex items-center space-x-3">
                                            <i class="fab fa-dropbox text-2xl text-blue-600"></i>
                                            <span class="font-medium text-sm">Dropbox</span>
                                        </div>
                                        <button class="w-full sm:w-auto px-3 py-1 text-xs border rounded-lg text-indigo-600 border-indigo-600 hover:bg-indigo-50 whitespace-nowrap">Connect</button>
                                    </div>
                                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2">
                                        <div class="flex items-center space-x-3">
                                            <i class="fab fa-slack text-2xl text-purple-600"></i>
                                            <span class="font-medium text-sm">Slack</span>
                                        </div>
                                        <button class="w-full sm:w-auto px-3 py-1 text-xs border rounded-lg text-indigo-600 border-indigo-600 hover:bg-indigo-50 whitespace-nowrap">Connect</button>
                                    </div>
                                </div>
                        </div>

                        <!-- Notifications Settings -->
                        <div id="notifications-settings" class="setting-content">
                                <h4 class="text-lg font-medium mb-4">Notification Settings</h4>
                                <p class="text-sm text-gray-600 mb-4">Choose how you want to be notified.</p>
                                <div class="space-y-4">
                                    <div>
                                    <span class="block text-sm font-medium text-gray-700 mb-2">New Task Assigned</span>
                                        <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0">
                                        <label class="inline-flex items-center"><input type="checkbox" class="form-checkbox text-indigo-600 border-gray-300 rounded" checked><span class="ml-2 text-sm">In-App</span></label>
                                        <label class="inline-flex items-center"><input type="checkbox" class="form-checkbox text-indigo-600 border-gray-300 rounded" checked><span class="ml-2 text-sm">Email</span></label>
                                    </div>
                                    </div>
                                    <div>
                                    <span class="block text-sm font-medium text-gray-700 mb-2">Upcoming Deadline</span>
                                        <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0">
                                        <label class="inline-flex items-center"><input type="checkbox" class="form-checkbox text-indigo-600 border-gray-300 rounded" checked><span class="ml-2 text-sm">In-App</span></label>
                                        <label class="inline-flex items-center"><input type="checkbox" class="form-checkbox text-indigo-600 border-gray-300 rounded" checked><span class="ml-2 text-sm">Email</span></label>
                                    </div>
                                    </div>
                                    <div>
                                    <span class="block text-sm font-medium text-gray-700 mb-2">New Client Message</span>
                                        <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0">
                                        <label class="inline-flex items-center"><input type="checkbox" class="form-checkbox text-indigo-600 border-gray-300 rounded" checked><span class="ml-2 text-sm">In-App</span></label>
                                        <label class="inline-flex items-center"><input type="checkbox" class="form-checkbox text-indigo-600 border-gray-300 rounded"><span class="ml-2 text-sm">Email</span></label>
                                    </div>
                                    </div>
                                </div>
                                <div class="mt-6 flex justify-end">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Save Changes</button>
                                </div>
                        </div>

                         <!-- Security Settings -->
                        <div id="security-settings" class="setting-content">
                            <h4 class="text-lg font-medium mb-4">Security</h4>
                            <div class="space-y-6"> <!-- Increased spacing -->
                                <div>
                                    <h5 class="text-md font-medium">Change Password</h5>
                                    <div class="mt-2 space-y-3 md:w-full lg:w-1/2"> <!-- Adjusted width -->
                                        <div>
                                            <label for="current-password" class="block text-sm font-medium text-gray-700">Current Password</label>
                                            <input type="password" id="current-password" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label for="new-password" class="block text-sm font-medium text-gray-700">New Password</label>
                                            <input type="password" id="new-password" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                        </div>
                                        <div>
                                            <label for="confirm-password" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
                                            <input type="password" id="confirm-password" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                        </div>
                                        <button class="w-full sm:w-auto px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg text-sm hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Update Password</button>
                                    </div>
                                </div>
                                <div class="border-t pt-6"> <!-- Increased padding -->
                                    <h5 class="text-md font-medium">Two-Factor Authentication (2FA)</h5>
                                    <div class="mt-2 flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3">
                                        <span class="text-sm text-gray-600">Status: Enabled</span>
                                        <button class="w-full sm:w-auto px-3 py-1 text-xs border rounded-lg text-red-600 border-red-600 hover:bg-red-50">Disable 2FA</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        <!-- Optional: Overlay for mobile menu -->
        <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    // DOM Elements
    const elements = {
        sidebar: document.getElementById('sidebar'),
        toggleSidebar: document.getElementById('toggleSidebar'),
        mobileMenuButton: document.getElementById('mobileMenuButton'),
        mobileCloseButton: document.getElementById('mobileCloseButton'),
        sidebarOverlay: document.getElementById('sidebarOverlay'),
        sidebarTitle: document.querySelector('.sidebar-title'),
        sidebarUser: document.querySelector('.sidebar-user'),
        sidebarTexts: document.querySelectorAll('.sidebar-text'),
        toggleIcon: document.getElementById('toggleSidebar')?.querySelector('i'),
        sidebarLinks: document.querySelectorAll('.sidebar-link'),
        tabContents: document.querySelectorAll('.tab-content'),
        currentViewTitle: document.getElementById('currentViewTitle'),
        settingTabs: document.querySelectorAll('[data-setting-tab]'),
        settingContents: document.querySelectorAll('.setting-content'),
        timerDisplay: document.getElementById('timerDisplay'),
        startBtn: document.getElementById('startTimerBtn'),
        stopBtn: document.getElementById('stopTimerBtn'),
        pauseBtn: document.getElementById('pauseTimerBtn'),
        calendarDays: document.querySelectorAll('.calendar-day:not(.calendar-day-disabled)'),
        billingCtx: document.getElementById('billingChart'),
        caseCtx: document.getElementById('caseChart')
    };

    // ===== Mobile Menu Functionality =====
    const mobileMenu = {
        open: () => {
            elements.sidebar.classList.remove('-translate-x-full');
            elements.sidebarOverlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        },
        
        close: () => {
            elements.sidebar.classList.add('-translate-x-full');
            elements.sidebarOverlay.classList.add('hidden');
            document.body.style.overflow = '';
        },
        
        init: () => {
            if (elements.mobileMenuButton) {
                elements.mobileMenuButton.addEventListener('click', mobileMenu.open);
            }
            
            if (elements.mobileCloseButton) {
                elements.mobileCloseButton.addEventListener('click', mobileMenu.close);
            }
            
            if (elements.sidebarOverlay) {
                elements.sidebarOverlay.addEventListener('click', mobileMenu.close);
            }
        }
    };

    // ===== Desktop Sidebar Toggle =====
    const desktopSidebar = {
        toggle: () => {
            if (window.innerWidth < 768) return; // Only for desktop view
            
            const isCollapsed = elements.sidebar.classList.contains('md:w-20');
            
            if (isCollapsed) {
                // Expand
                elements.sidebar.classList.remove('md:w-20');
                elements.sidebar.classList.add('md:w-64');
                if (elements.sidebarTitle) elements.sidebarTitle.classList.remove('hidden');
                if (elements.sidebarUser) elements.sidebarUser.classList.remove('hidden');
                elements.sidebarTexts.forEach(text => text.classList.remove('hidden'));
                
                if (elements.toggleIcon) {
                    elements.toggleIcon.classList.remove('fa-chevron-right');
                    elements.toggleIcon.classList.add('fa-chevron-left');
                }
            } else {
                // Collapse
                elements.sidebar.classList.remove('md:w-64');
                elements.sidebar.classList.add('md:w-20');
                if (elements.sidebarTitle) elements.sidebarTitle.classList.add('hidden');
                if (elements.sidebarUser) elements.sidebarUser.classList.add('hidden');
                elements.sidebarTexts.forEach(text => text.classList.add('hidden'));
                
                if (elements.toggleIcon) {
                    elements.toggleIcon.classList.remove('fa-chevron-left');
                    elements.toggleIcon.classList.add('fa-chevron-right');
                }
            }
        },
        
        init: () => {
            if (elements.toggleSidebar) {
                elements.toggleSidebar.addEventListener('click', desktopSidebar.toggle);
            }
        }
    };

    // ===== Tab Navigation =====
    const tabNavigation = {
        switchMainTab: (e) => {
            e.preventDefault();
            const link = e.currentTarget;
            const tabId = link.getAttribute('data-tab');
            
            // Update active link
            elements.sidebarLinks.forEach(l => l.classList.remove('active', 'bg-indigo-800'));
            link.classList.add('active', 'bg-indigo-800');
            
            // Update active content
            elements.tabContents.forEach(content => {
                content.classList.toggle('active', content.id === tabId);
            });
            
            // Update header title
            const linkText = link.querySelector('.sidebar-text');
            if (elements.currentViewTitle && linkText) {
                elements.currentViewTitle.textContent = linkText.textContent;
            }
            
            // Close mobile menu if open
            if (window.innerWidth < 768) {
                mobileMenu.close();
            }
        },
        
        switchSettingTab: (e) => {
            e.preventDefault();
            const tab = e.currentTarget;
            const targetId = tab.getAttribute('data-setting-tab') + '-settings';
            
            // Update tab styles
            elements.settingTabs.forEach(t => {
                t.classList.remove('text-indigo-600', 'border-indigo-600');
                t.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300', 'border-transparent');
            });
            
            tab.classList.add('text-indigo-600', 'border-indigo-600');
            tab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300', 'border-transparent');
            
            // Update content visibility
            elements.settingContents.forEach(content => {
                if (content.id === targetId) {
                    content.classList.add('active');
                    content.style.display = 'block';
                } else {
                    content.classList.remove('active');
                    content.style.display = 'none';
                }
            });
        },
        
        init: () => {
            // Main tab navigation
            elements.sidebarLinks.forEach(link => {
                link.addEventListener('click', tabNavigation.switchMainTab);
            });
            
            // Settings tab navigation
            elements.settingTabs.forEach(tab => {
                tab.addEventListener('click', tabNavigation.switchSettingTab);
            });
            
            // Initialize settings tabs if needed
            const activeSettingTab = document.querySelector('.setting-content.active');
            if (activeSettingTab) {
                activeSettingTab.style.display = 'block';
            } else {
                const firstSettingTab = document.querySelector('.setting-content');
                if (firstSettingTab) {
                    firstSettingTab.classList.add('active');
                    firstSettingTab.style.display = 'block';
                }
            }
        }
    };

    // ===== Calendar =====
    const calendar = {
        selectDay: (e) => {
            elements.calendarDays.forEach(d => d.classList.remove('calendar-day-selected'));
            e.currentTarget.classList.add('calendar-day-selected');
        },
        
        init: () => {
            elements.calendarDays.forEach(day => {
                day.addEventListener('click', calendar.selectDay);
            });
        }
    };

    // ===== Timer =====
    const timer = {
        interval: null,
        seconds: 0,
        running: false,
        paused: false,
        
        formatTime: (totalSeconds) => {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const secs = totalSeconds % 60;
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        },
        
        updateDisplay: () => {
            if (elements.timerDisplay) {
                elements.timerDisplay.textContent = timer.formatTime(timer.seconds);
            }
        },
        
        start: () => {
            if (!elements.startBtn || !elements.stopBtn || !elements.pauseBtn || !elements.timerDisplay) return;
            
            if (!timer.running) { // Start fresh
                timer.running = true;
                timer.paused = false;
                elements.startBtn.classList.add('hidden');
                elements.stopBtn.classList.remove('hidden');
                elements.pauseBtn.classList.remove('hidden');
                elements.pauseBtn.innerHTML = '<i class="fas fa-pause"></i><span>Pause</span>';
                timer.interval = setInterval(() => { timer.seconds++; timer.updateDisplay(); }, 1000);
                elements.timerDisplay.classList.remove('text-gray-700', 'text-yellow-600');
                elements.timerDisplay.classList.add('text-green-600');
            } else if (timer.paused) { // Resume
                timer.paused = false;
                elements.pauseBtn.innerHTML = '<i class="fas fa-pause"></i><span>Pause</span>';
                timer.interval = setInterval(() => { timer.seconds++; timer.updateDisplay(); }, 1000);
                elements.timerDisplay.classList.remove('text-yellow-600');
                elements.timerDisplay.classList.add('text-green-600');
            }
        },
        
        pause: () => {
            if (!elements.startBtn || !elements.stopBtn || !elements.pauseBtn || !elements.timerDisplay) return;
            
            if (timer.running && !timer.paused) {
                timer.paused = true;
                clearInterval(timer.interval);
                elements.pauseBtn.innerHTML = '<i class="fas fa-play"></i><span>Resume</span>';
                elements.timerDisplay.classList.remove('text-green-600');
                elements.timerDisplay.classList.add('text-yellow-600');
            } else if (timer.paused) {
                timer.start(); // Resume if pause button is clicked while paused
            }
        },
        
        stop: () => {
            if (!elements.startBtn || !elements.stopBtn || !elements.pauseBtn || !elements.timerDisplay) return;
            
            timer.running = false;
            timer.paused = false;
            clearInterval(timer.interval);
            
            const caseVal = document.getElementById('timer-case')?.value || 'N/A';
            const descVal = document.getElementById('timer-description')?.value || '';
            console.log(`Timer stopped. Duration: ${timer.formatTime(timer.seconds)}. Case: ${caseVal}. Desc: ${descVal}`);
            
            timer.seconds = 0;
            timer.updateDisplay();
            elements.startBtn.classList.remove('hidden');
            elements.stopBtn.classList.add('hidden');
            elements.pauseBtn.classList.add('hidden');
            elements.pauseBtn.innerHTML = '<i class="fas fa-pause"></i><span>Pause</span>';
            elements.timerDisplay.classList.remove('text-green-600', 'text-yellow-600');
            elements.timerDisplay.classList.add('text-gray-700');
            
            if (document.getElementById('timer-description')) {
                document.getElementById('timer-description').value = '';
            }
        },
        
        init: () => {
            if (elements.startBtn) elements.startBtn.addEventListener('click', timer.start);
            if (elements.stopBtn) elements.stopBtn.addEventListener('click', timer.stop);
            if (elements.pauseBtn) elements.pauseBtn.addEventListener('click', timer.pause);
            timer.updateDisplay(); // Initialize display
        }
    };

    // ===== Charts =====
    const charts = {
        initBillingChart: () => {
            if (!elements.billingCtx) return;
            
            try {
                new Chart(elements.billingCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Billable Hours',
                            data: [120, 150, 140, 165, 180, 170, 190, 210, 195, 220, 230, 156.5],
                            borderColor: 'rgb(79, 70, 229)',
                            tension: 0.1,
                            fill: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true } }
                    }
                });
            } catch (e) {
                console.error("Error initializing billing chart:", e);
            }
        },
        
        initCaseChart: () => {
            if (!elements.caseCtx) return;
            
            try {
                new Chart(elements.caseCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Personal Injury', 'Estate Planning', 'Corporate Law', 'Litigation', 'Other'],
                        datasets: [{
                            label: 'Case Distribution',
                            data: [35, 25, 15, 20, 5],
                            backgroundColor: [
                                '#3B82F6', // blue-500
                                '#10B981', // green-500
                                '#EF4444', // red-500
                                '#F59E0B', // amber-500
                                '#8B5CF6'  // violet-500
                            ],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                    }
                });
            } catch (e) {
                console.error("Error initializing case chart:", e);
            }
        },
        
        init: () => {
            charts.initBillingChart();
            charts.initCaseChart();
        }
    };

    // Initialize all components
    mobileMenu.init();
    desktopSidebar.init();
    tabNavigation.init();
    calendar.init();
    timer.init();
    charts.init();
});

// Function to handle tab switching
document.addEventListener('DOMContentLoaded', function() {
  // Get all tab buttons
  const tabButtons = document.querySelectorAll('[data-setting-tab]');
  
  // Add click event listener to each tab button
  tabButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Get the tab target from data attribute
      const tabTarget = this.getAttribute('data-setting-tab');
      
      // Remove active class from all tab buttons
      tabButtons.forEach(btn => {
        btn.classList.remove('text-indigo-600', 'border-indigo-600');
        btn.classList.add('text-gray-500', 'border-transparent');
      });
      
      // Add active class to clicked tab button
      this.classList.remove('text-gray-500', 'border-transparent');
      this.classList.add('text-indigo-600', 'border-indigo-600');
      
      // Hide all content sections
      const allContent = document.querySelectorAll('.setting-content');
      allContent.forEach(content => {
        content.classList.remove('active');
        content.style.display = 'none';
      });
      
      // Show the target content section
      // Handle both formats (with or without -settings suffix)
      let targetContent = document.getElementById(tabTarget);
      if (!targetContent) {
        targetContent = document.getElementById(tabTarget + '-settings');
      }
      
      if (targetContent) {
        targetContent.classList.add('active');
        targetContent.style.display = 'block';
      }
    });
  });
  
  // Initialize - make sure the active tab content is displayed
  const activeTab = document.querySelector('.setting-content.active');
  if (activeTab) {
    activeTab.style.display = 'block';
  } else {
    // If no active tab, set the first tab as active
    const firstTab = document.querySelector('.setting-content');
    if (firstTab) {
      firstTab.classList.add('active');
      firstTab.style.display = 'block';
    }
  }
});
    </script>

</body>
</html>

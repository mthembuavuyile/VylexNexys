<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Enhancements -->
    <title>South Africa Quiz Challenge | Test Your Knowledge | Vylex Nexys</title>
    <meta name="description" content="Challenge your knowledge of South Africa with our interactive quiz covering geography, wildlife, culture, languages and landmarks of the Rainbow Nation.">
    <meta name="keywords" content="South Africa Quiz, Rainbow Nation, South African Knowledge, Interactive Quiz, Vylex Nexys">
    <meta name="author" content="Vylex Nexys">
    <!-- Open Graph Tags for Social Sharing -->
    <meta property="og:title" content="South Africa Quiz Challenge | Vylex Nexys">
    <meta property="og:description" content="Test your knowledge of South Africa with our interactive quiz about the Rainbow Nation!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vylexnexys.co.za/sa-quiz-challenge">
    <meta property="og:image" content="https://vylexnexys.co.za/images/sa-quiz-preview.jpg">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="South Africa Quiz Challenge | Vylex Nexys">
    <meta name="twitter:description" content="Test your knowledge of South Africa with our interactive quiz!">
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MDAgODAwIj48cGF0aCBmaWxsPSIjRTAzQzMxIiBkPSJNMCwxMzMuM2MwLDAsMjAwLTEwMCw0MDAtMTAwczQwMCwxMDAsNDAwLDEwMHYxMzMuM0gwVjEzMy4zeiIvPjxwYXRoIGZpbGw9IiMwMDFFNkEiIGQ9Ik0wLDUzMy4zYzAsMCwyMDAsMTAwLDQwMCwxMDBzNDAwLTEwMCw0MDAtMTAwVjQwMEgwVjUzMy4zeiIvPjxwYXRoIGZpbGw9IiMwMDdBM0QiIGQ9Ik0wLDEzMy4zaDgwMFY0MDBIMFYxMzMuM3oiLz48cGF0aCBmaWxsPSIjMDAwMDAwIiBkPSJNMCw0MDBIODAwVjUzMy4zSDBWNDAweiIvPjxwYXRoIGZpbGw9IiNGRkI2MTIiIGQ9Ik0zMDAsMTMzLjNMMCw0MDBWMTM0LjNMMzAwLDEzMy4zeiIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zNTAsMTMzLjNMNTAsNDAwVjEzMy4zSDM1MHoiLz48cGF0aCBmaWxsPSIjMDAwMDAwIiBkPSJNMzAwLDEzMy4zTDAsNDAwdjEzMy4zTDMwMCw0MDBsMCwxMzMuM2g1MEw1MCw0MDB2MTMzLjNoLTUwTDMwMCw1MzMuM2g1MEwzNTAsNDAwaDUwVjEzMy4zSDMwMHoiLz48L3N2Zz4=">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ==========================================================================
   Import Fonts
   ========================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap');

/* ==========================================================================
   Variables
   ========================================================================== */
:root {
    /* Primary Colors */
    --primary-color: #0369a1;
    --primary-hover: #0284c7;
    --secondary-color: #10b981;
    
    /* South African Flag Colors */
    --sa-red: #E03C31;
    --sa-blue: #001E6A;
    --sa-green: #007A3D;
    --sa-yellow: #FFB612;
    --sa-black: #000000;
}

/* ==========================================================================
   Base Styles
   ========================================================================== */
body {
    font-family: 'Montserrat', sans-serif;
    background-color: #f8fafc;
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23bae6fd' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
}

/* ==========================================================================
   South African Flag Component
   ========================================================================== */
.sa-flag {
    position: relative;
    width: 300px;
    height: 200px;
    perspective: 1000px;
    transform-style: preserve-3d;
    transition: transform 0.5s ease;
}

.sa-flag:hover {
    transform: rotate3d(0, 1, 0, 15deg);
}

.sa-flag svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
}

/* Flag SVG Hover Effects */
.sa-flag svg path,
.sa-flag svg g {
    transition: all 0.3s ease;
}

.sa-flag:hover svg path[fill="#E03C31"] { fill: #ff4444; }
.sa-flag:hover svg path[fill="#001489"] { fill: #0026ff; }
.sa-flag:hover svg path[stroke="#007749"] { stroke: #00994d; }
.sa-flag:hover svg path[stroke="#ffb81c"] { stroke: #ffcc33; }

/* ==========================================================================
   Buttons and Interactive Elements
   ========================================================================== */
.btn-primary {
    background-color: var(--primary-color);
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background-color: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.option-btn {
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.option-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border-color: var(--primary-color);
}

/* ==========================================================================
   Quiz Components
   ========================================================================== */
.quiz-card {
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 10px 25px -5px rgba(3, 105, 161, 0.1), 0 10px 10px -5px rgba(3, 105, 161, 0.04);
    transition: transform 0.3s ease;
}

.quiz-card:hover {
    transform: translateY(-5px);
}

.correct-answer {
    background-color: var(--secondary-color) !important;
    color: white !important;
    transform: scale(1.02);
    box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.1), 0 4px 6px -2px rgba(16, 185, 129, 0.05);
}

.wrong-answer {
    background-color: #ef4444 !important;
    color: white !important;
    transform: scale(0.98);
}

.progress-bar {
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* ==========================================================================
   Brand Styles
   ========================================================================== */
.vylex-brand {
    background: linear-gradient(to right, #0369a1, #0284c7);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 800;
}

.brand-pulse {
    animation: brand-pulse 5s infinite cubic-bezier(0.4, 0, 0.6, 1);
}

/* ==========================================================================
   Tooltips
   ========================================================================== */
.sa-tooltip {
    position: relative;
    display: inline-block;
}

.sa-tooltip::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    width: max-content;
    padding: 8px 12px;
    background-color: var(--sa-blue);
    color: white;
    border-radius: 6px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    font-size: 0.875rem;
    z-index: 10;
}

.sa-tooltip:hover::after {
    opacity: 1;
    visibility: visible;
}

/* ==========================================================================
   Animations
   ========================================================================== */
/* Flag Animations */
@keyframes flagWave {
    0%, 100% { transform: rotate3d(0, 1, 0, 0deg); }
    50% { transform: rotate3d(0, 1, 0, 10deg); }
}

@keyframes flag-shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* Confetti Animations */
@keyframes confetti-slow {
    0% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0); }
    100% { transform: translate3d(25px, 105vh, 0) rotateX(360deg) rotateY(180deg); }
}

@keyframes confetti-medium {
    0% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0); }
    100% { transform: translate3d(100px, 105vh, 0) rotateX(100deg) rotateY(360deg); }
}

@keyframes confetti-fast {
    0% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0); }
    100% { transform: translate3d(-50px, 105vh, 0) rotateX(10deg) rotateY(250deg); }
}

@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

@keyframes brand-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

@keyframes circle-fill {
    from { stroke-dashoffset: 339.3; }
    to { stroke-dashoffset: attr(data-offset); }
}

/* ==========================================================================
   Animation Utility Classes
   ========================================================================== */
.flag-wave {
    animation: flagWave 6s ease-in-out infinite;
}

.confetti {
    position: absolute;
    z-index: 10;
    top: -10px;
    border-radius: 0%;
    animation-fill-mode: both;
}

.confetti--animation-slow {
    animation: confetti-slow 3.25s linear 1 forwards;
}

.confetti--animation-medium {
    animation: confetti-medium 2.75s linear 1 forwards;
}

.confetti--animation-fast {
    animation: confetti-fast 2.25s linear 1 forwards;
}

.shimmer {
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
}

#result-circle {
    animation: circle-fill 1.5s ease-out forwards;
}
    </style>
</head>

<body class="min-h-screen flex flex-col">
    <!-- Enhanced flag component for the header -->
    <header class="w-full bg-white shadow-sm py-2 px-4 fixed top-0 left-0 right-0 z-50">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <a href="https://vylexnexys.co.za" class="flex items-center space-x-2" title="Vylex Nexys">
                <div class="sa-flag w-8 h-8">
                    <svg xmlns="http://www.w3.org/2000/svg" width="900" height="600" viewBox="0 0 90 60">
                        <title>Flag of South Africa</title>
                        <defs>
                         <clipPath id="t">
                          <path d="m0 0 45 30L0 60z"/>
                         </clipPath>
                         <clipPath id="f">
                          <path d="m0 0h90v60H0z"/>
                         </clipPath>
                        </defs>
                        <path fill="#E03C31" d="m0 0h90v30H45z"/>
                        <path fill="#001489" d="m0 60h90V30H45z"/>
                        <g clip-path="url(#f)" fill="none">
                         <path stroke="#FFF" stroke-width="20" d="m90 30H45L0 0v60l45-30"/>
                         <path fill="#000" stroke="#ffb81c" stroke-width="20" clip-path="url(#t)" d="m0 0 45 30L0 60"/>
                         <path stroke="#007749" stroke-width="12" d="m0 0 45 30h45M0 60l45-30"/>
                        </g>
                        </svg>
                    <div class="flag-shimmer"></div>
                </div>
                <span class="vylex-brand text-lg md:text-xl brand-pulse">Vylex Nexys</span>
            </a>
            <div class="text-xs md:text-sm text-gray-500">
                South Africa Quiz Challenge
            </div>
        </div>
    </header>

    <!-- Intro/Start Screen with Enhanced UI -->
    <div id="start-screen" class="flex flex-col items-center justify-center min-h-screen p-4 pt-16">
        <div class="w-full max-w-md p-6 bg-white rounded-2xl shadow-xl quiz-card">
            <div class="flag-colors h-4 w-full rounded-t-lg mb-6"></div>
            <h1 class="text-3xl font-bold text-center mb-2 text-sky-600">South Africa Quiz</h1>
            <p class="text-center text-gray-600 mb-6">Test your knowledge of the Rainbow Nation!</p>

            <div class="flex justify-center mb-8">
                <!-- Updated flag to match the header flag style -->
                <div class="h-40 w-40 relative flag-wave sa-flag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="900" height="600" viewBox="0 0 90 60" class="w-full h-full drop-shadow-md">
                        <title>Flag of South Africa</title>
                        <defs>
                         <clipPath id="main-t">
                          <path d="m0 0 45 30L0 60z"/>
                         </clipPath>
                         <clipPath id="main-f">
                          <path d="m0 0h90v60H0z"/>
                         </clipPath>
                        </defs>
                        <path fill="#E03C31" d="m0 0h90v30H45z"/>
                        <path fill="#001489" d="m0 60h90V30H45z"/>
                        <g clip-path="url(#main-f)" fill="none">
                         <path stroke="#FFF" stroke-width="20" d="m90 30H45L0 0v60l45-30"/>
                         <path fill="#000" stroke="#ffb81c" stroke-width="20" clip-path="url(#main-t)" d="m0 0 45 30L0 60"/>
                         <path stroke="#007749" stroke-width="12" d="m0 0 45 30h45M0 60l45-30"/>
                        </g>
                    </svg>
                    <!-- Flag shimmer overlay -->
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"></div>
                </div>
            </div>

            <!-- Enhanced selection boxes -->
            <div class="mb-6">
                <label for="category-select" class="block text-sm font-semibold mb-2 text-gray-700">Select Category:</label>
                <select id="category-select"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 bg-white shadow-sm">
                    <option value="all">All Categories</option>
                    <option value="geography">Geography</option>
                    <option value="animals">Wildlife & Animals</option>
                    <option value="culture">Culture & History</option>
                    <option value="languages">Languages</option>
                    <option value="landmarks">Landmarks & Tourism</option>
                </select>
            </div>

            <div class="mb-8">
                <label for="difficulty-select" class="block text-sm font-semibold mb-2 text-gray-700">Select Difficulty:</label>
                <select id="difficulty-select"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 bg-white shadow-sm">
                    <option value="easy">Easy (10 questions)</option>
                    <option value="medium">Medium (20 questions)</option>
                    <option value="hard">Hard (30 questions)</option>
                    <option value="expert">Expert (50 questions)</option>
                    <option value="master">Master (All questions)</option>
                </select>
            </div>

            <!-- Enhanced Start button -->
            <button id="start-btn"
                class="w-full py-4 px-6 bg-sky-600 hover:bg-sky-700 text-white font-bold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center btn-primary">
                <span>Start Quiz</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                        clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Quiz Screen with Enhanced UI -->
    <div id="quiz-screen" class="hidden flex-col items-center justify-start min-h-screen p-4 pt-20">
        <div class="w-full max-w-3xl bg-white rounded-2xl shadow-xl overflow-hidden quiz-card">
            <div class="flag-colors h-4 w-full"></div>

            <div class="p-6">
                <!-- Header with progress info -->
                <div class="flex flex-col sm:flex-row items-center justify-between mb-6">
                    <div class="mb-4 sm:mb-0">
                        <div class="text-gray-600 font-semibold">Question <span id="current-question">1</span>/<span
                                id="total-questions">10</span></div>
                        <div class="text-sm text-gray-500 flex items-center">
                            <span class="inline-block w-3 h-3 rounded-full mr-2" style="background-color: var(--primary-color);"></span>
                            <span id="category-display">Category</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div>
                            <div class="text-gray-600 font-semibold text-right">Score</div>
                            <div class="text-sky-600 font-bold text-right"><span id="score">0</span></div>
                        </div>
                        <div class="bg-sky-100 rounded-full p-3 shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-sky-600" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Progress bar -->
                <div class="w-full bg-gray-200 rounded-full h-3 mb-8 shadow-inner">
                    <div id="progress-bar" class="bg-sky-600 h-3 rounded-full progress-bar" style="width: 0%"></div>
                </div>

                <!-- Enhanced Question display -->
                <div id="question-container" class="mb-8 bg-sky-50 p-4 rounded-lg border-l-4 border-sky-500">
                    <h2 id="question-text" class="text-xl sm:text-2xl font-bold text-gray-800 mb-2"></h2>
                </div>

                <!-- Options with improved styling -->
                <div id="options-container" class="grid grid-cols-1 gap-3 mb-6">
                    <!-- Options will be inserted here by JavaScript -->
                </div>

                <!-- Enhanced Feedback -->
                <div id="feedback" class="hidden rounded-lg p-4 mb-6 border">
                    <p id="feedback-text" class="text-center"></p>
                </div>

                <!-- Enhanced Next button -->
                <button id="next-btn"
                    class="hidden w-full py-4 px-6 bg-sky-600 hover:bg-sky-700 text-white font-bold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center btn-primary">
                    <span>Next Question</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Result Screen with Enhanced UI -->
<div id="result-screen" class="hidden flex-col items-center justify-center min-h-screen p-4 pt-16">
    <div class="w-full max-w-md p-6 bg-white rounded-2xl shadow-xl quiz-card">
        <div class="flag-colors h-4 w-full rounded-t-lg mb-6"></div>

        <h1 class="text-3xl font-bold text-center mb-2 text-sky-600">Quiz Results</h1>
        <p class="text-center text-gray-600 mb-6">You completed the South Africa Quiz!</p>

        <div class="mb-8 flex flex-col items-center">
            <div class="mb-4 relative">
                <!-- Enhanced results circle -->
                <svg viewBox="0 0 120 120" class="w-32 h-32 drop-shadow-md">
                    <circle cx="60" cy="60" r="54" fill="none" stroke="#E5E7EB" stroke-width="12" />
                    <circle id="result-circle" cx="60" cy="60" r="54" fill="none" stroke="url(#result-gradient)" stroke-width="12"
                        stroke-dasharray="339.3" stroke-dashoffset="339.3" transform="rotate(-90 60 60)" />
                    <defs>
                        <linearGradient id="result-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#0ea5e9" />
                            <stop offset="100%" stop-color="#0284c7" />
                        </linearGradient>
                    </defs>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center">
                    <span id="result-percentage" class="text-3xl font-bold text-sky-600">0%</span>
                </div>
            </div>

            <div class="text-center">
                <div class="text-gray-700 mb-1">Final Score</div>
                <div class="text-2xl font-bold text-sky-600"><span id="final-score">0</span>/<span
                        id="total-questions-result">10</span></div>
            </div>
        </div>

        <div id="achievement-section" class="mb-8 hidden">
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-center">
                <div class="bg-yellow-100 rounded-full p-2 mr-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>
                </div>
                <div>
                    <div class="font-semibold text-yellow-800" id="achievement-title">Achievement Unlocked!</div>
                    <div class="text-sm text-yellow-700" id="achievement-description"></div>
                </div>
            </div>
        </div>

        <div id="result-message" class="text-center mb-8 text-gray-700">
            <!-- Result message will be set by JavaScript -->
        </div>

        <div class="flex flex-col sm:flex-row gap-3">
            <button id="restart-btn"
                class="flex-1 py-3 px-6 bg-sky-600 hover:bg-sky-700 text-white font-bold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                        clip-rule="evenodd" />
                </svg>
                <span>Play Again</span>
            </button>

            <button id="share-btn"
                class="flex-1 py-3 px-6 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path
                        d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                </svg>
                <span>Share Results</span>
            </button>
        </div>
    </div>
</div>
<!-- QUIiz questions database -->

<div id="confetti-container" class="fixed inset-0 pointer-events-none z-50"></div>

<script src="js/sa-quiz-database.js"></script>
    <script>
        

        // Variables to track quiz state
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answered = false;
        let timerInterval = null;
        let timeLeft = 0;
        let quizHistory = [];

        // Load saved quiz history from localStorage if available
        try {
            const savedHistory = localStorage.getItem('saQuizHistory');
            if (savedHistory) {
                quizHistory = JSON.parse(savedHistory);
            }
        } catch (error) {
            console.error('Error loading quiz history:', error);
            // Continue with empty history if there's an error
        }

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const categorySelect = document.getElementById('category-select');
        const difficultySelect = document.getElementById('difficulty-select');
        const startBtn = document.getElementById('start-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const totalQuestionsResultEl = document.getElementById('total-questions-result');
        const scoreEl = document.getElementById('score');
        const finalScoreEl = document.getElementById('final-score');
        const resultPercentageEl = document.getElementById('result-percentage');
        const resultCircleEl = document.getElementById('result-circle');
        const progressBarEl = document.getElementById('progress-bar');
        const feedbackEl = document.getElementById('feedback');
        const feedbackTextEl = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const shareBtn = document.getElementById('share-btn');
        const categoryDisplayEl = document.getElementById('category-display');
        const resultMessageEl = document.getElementById('result-message');
        const achievementSectionEl = document.getElementById('achievement-section');
        const achievementTitleEl = document.getElementById('achievement-title');
        const achievementDescriptionEl = document.getElementById('achievement-description');
        const confettiContainer = document.getElementById('confetti-container');
        const timerEl = document.getElementById('timer') || document.createElement('div'); // Fallback if timer element doesn't exist
        const highScoreEl = document.getElementById('high-score') || document.createElement('div'); // Fallback for high score

        // Ensure all elements exist to prevent null reference errors
        if (!startScreen || !quizScreen || !resultScreen) {
            console.error('Critical elements missing from the DOM');
            alert('Something went wrong loading the quiz. Please refresh the page.');
        }

        // Initialize the quiz
        function init() {
            // Add event listeners only if elements exist
            if (startBtn) startBtn.addEventListener('click', startQuiz);
            if (nextBtn) nextBtn.addEventListener('click', nextQuestion);
            if (restartBtn) restartBtn.addEventListener('click', resetQuiz);
            if (shareBtn) shareBtn.addEventListener('click', shareResults);
            
            // Check if we have questions
            if (!quizQuestions || quizQuestions.length === 0) {
                console.error('No quiz questions available');
                alert('Error: No quiz questions available. Please check your connection and refresh the page.');
                return;
            }
            
            // Display high score if available
            updateHighScoreDisplay();
            
            // Add keyboard navigation
            document.addEventListener('keydown', handleKeyPress);
        }

        // Handle keyboard navigation
        function handleKeyPress(e) {
            // Only handle keys when appropriate screens are visible
            if (!startScreen.classList.contains('hidden') && e.key === 'Enter') {
                startQuiz();
            } else if (!quizScreen.classList.contains('hidden')) {
                // Number keys 1-4 for selecting options
                if (e.key >= '1' && e.key <= '4' && !answered) {
                    const optionIndex = parseInt(e.key) - 1;
                    const options = optionsContainer.querySelectorAll('.option-btn');
                    if (options[optionIndex]) {
                        options[optionIndex].click();
                    }
                } else if (e.key === 'Enter' && answered) {
                    nextQuestion();
                }
            } else if (!resultScreen.classList.contains('hidden') && e.key === 'Enter') {
                resetQuiz();
            }
        }

        // Display high score
        function updateHighScoreDisplay() {
            if (!highScoreEl) return;
            
            try {
                const highScores = {};
                quizHistory.forEach(record => {
                    const key = `${record.category}-${record.difficulty}`;
                    if (!highScores[key] || record.percentage > highScores[key].percentage) {
                        highScores[key] = record;
                    }
                });
                
                // Get current selection for display
                const category = categorySelect ? categorySelect.value : 'all';
                const difficulty = difficultySelect ? difficultySelect.value : 'easy';
                const key = `${category}-${difficulty}`;
                
                if (highScores[key]) {
                    highScoreEl.textContent = `High Score: ${highScores[key].percentage}%`;
                    highScoreEl.classList.remove('hidden');
                } else {
                    highScoreEl.classList.add('hidden');
                }
            } catch (error) {
                console.error('Error updating high score display:', error);
            }
        }

        // Add event listeners to category and difficulty dropdowns
        if (categorySelect) {
            categorySelect.addEventListener('change', updateHighScoreDisplay);
        }
        if (difficultySelect) {
            difficultySelect.addEventListener('change', updateHighScoreDisplay);
        }

        // Start the quiz
        function startQuiz() {
            try {
                // Filter questions by category if needed
                let filteredQuestions = quizQuestions;
                const selectedCategory = categorySelect ? categorySelect.value : 'all';
                if (selectedCategory !== 'all') {
                    filteredQuestions = quizQuestions.filter(q => q.category === selectedCategory);
                }

                // Check if we have enough questions
                if (filteredQuestions.length === 0) {
                    alert(`No questions available for the ${selectedCategory} category. Please select another category.`);
                    return;
                }

                // Determine number of questions based on difficulty
                const difficulty = difficultySelect ? difficultySelect.value : 'easy';
                let numQuestions;

                switch (difficulty) {
                    case 'easy':
                        numQuestions = 10;
                        timeLeft = 15; // 15 seconds per question
                        break;
                    case 'medium':
                        numQuestions = 20;
                        timeLeft = 12; // 12 seconds per question
                        break;
                    case 'hard':
                        numQuestions = 30;
                        timeLeft = 10; // 10 seconds per question
                        break;
                    case 'expert':
                        numQuestions = 50;
                        timeLeft = 8; // 8 seconds per question
                        break;
                    case 'master':
                        numQuestions = filteredQuestions.length;
                        timeLeft = 6; // 6 seconds per question
                        break;
                    default:
                        numQuestions = 10;
                        timeLeft = 15;
                }

                // Make sure we don't try to get more questions than available
                numQuestions = Math.min(numQuestions, filteredQuestions.length);

                // Shuffle and select questions
                currentQuestions = shuffleArray(filteredQuestions).slice(0, numQuestions);
                currentQuestionIndex = 0;
                score = 0;

                // Update UI
                if (totalQuestionsEl) totalQuestionsEl.textContent = currentQuestions.length;
                if (totalQuestionsResultEl) totalQuestionsResultEl.textContent = currentQuestions.length;
                if (scoreEl) scoreEl.textContent = score;

                // Show quiz screen, hide start screen
                startScreen.classList.add('hidden');
                startScreen.classList.remove('flex');
                quizScreen.classList.remove('hidden');
                quizScreen.classList.add('flex');

                // Load first question
                loadQuestion();
            } catch (error) {
                console.error('Error starting quiz:', error);
                alert('An error occurred while starting the quiz. Please try again.');
            }
        }

        // Start timer for current question
        function startTimer() {
            if (!timerEl) return;
            
            // Clear any existing timer
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Set initial time based on difficulty
            const difficulty = difficultySelect ? difficultySelect.value : 'easy';
            let seconds = timeLeft;
            
            timerEl.textContent = `Time: ${seconds}s`;
            timerEl.classList.remove('text-red-500');
            
            timerInterval = setInterval(() => {
                seconds--;
                timerEl.textContent = `Time: ${seconds}s`;
                
                // Warning when time is running low
                if (seconds <= 5) {
                    timerEl.classList.add('text-red-500');
                }
                
                // Time's up
                if (seconds <= 0) {
                    clearInterval(timerInterval);
                    if (!answered) {
                        // Auto-select incorrect answer if time runs out
                        const currentQuestion = currentQuestions[currentQuestionIndex];
                        handleTimeUp(currentQuestion);
                    }
                }
            }, 1000);
        }

        // Handle time running out
        function handleTimeUp(question) {
            answered = true;
            
            // Update UI for all option buttons
            const optionButtons = optionsContainer.querySelectorAll('.option-btn');
            optionButtons.forEach(button => {
                if (button.textContent === question.answer) {
                    // Highlight correct answer
                    button.classList.add('correct-answer');
                }
                
                // Disable all buttons
                button.disabled = true;
            });
            
            // Show feedback
            feedbackEl.classList.remove('hidden');
            feedbackEl.classList.add('bg-yellow-100');
            feedbackTextEl.classList.add('text-yellow-800');
            feedbackTextEl.textContent = `Time's up! The correct answer is: ${question.answer}`;
            
            // Show next button
            nextBtn.classList.remove('hidden');
        }

        // Load current question
        function loadQuestion() {
            try {
                const question = currentQuestions[currentQuestionIndex];
                if (!question) {
                    console.error('Question not found at index', currentQuestionIndex);
                    nextQuestion(); // Skip this question if it doesn't exist
                    return;
                }

                // Update progress
                if (currentQuestionEl) currentQuestionEl.textContent = currentQuestionIndex + 1;
                const progressPercentage = ((currentQuestionIndex) / currentQuestions.length) * 100;
                if (progressBarEl) progressBarEl.style.width = `${progressPercentage}%`;

                // Update category display
                if (categoryDisplayEl) categoryDisplayEl.textContent = capitalizeFirstLetter(question.category);

                // Set question text
                if (questionText) questionText.textContent = question.question;

                // Clear previous options
                if (optionsContainer) optionsContainer.innerHTML = '';

                // Create option buttons
                if (optionsContainer && question.options) {
                    const shuffledOptions = shuffleArray([...question.options]);
                    shuffledOptions.forEach((option, index) => {
                        const button = document.createElement('button');
                        button.className = 'option-btn w-full py-3 px-4 bg-white border border-gray-300 rounded-lg text-left font-medium hover:bg-sky-50 hover:border-sky-300 transition-all duration-300';
                        button.textContent = option;
                        button.setAttribute('data-index', index + 1);
                        button.addEventListener('click', () => selectOption(option));
                        optionsContainer.appendChild(button);
                    });
                }

                // Reset state
                answered = false;
                if (nextBtn) nextBtn.classList.add('hidden');
                if (feedbackEl) feedbackEl.classList.add('hidden');
                
                // Start timer for this question
                startTimer();
            } catch (error) {
                console.error('Error loading question:', error);
                nextQuestion(); // Skip problematic question
            }
        }

        // Handle option selection
        function selectOption(selectedOption) {
            if (answered) return;

            answered = true;
            // Stop the timer
            if (timerInterval) {
                clearInterval(timerInterval);
            }

            const currentQuestion = currentQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.answer;

            // Update score if correct
            if (isCorrect) {
                score++;
                if (scoreEl) scoreEl.textContent = score;
                createConfetti();
            }

            // Update UI for all option buttons
            const optionButtons = optionsContainer ? optionsContainer.querySelectorAll('.option-btn') : [];
            optionButtons.forEach(button => {
                if (button.textContent === currentQuestion.answer) {
                    // Correct answer
                    button.classList.add('correct-answer');
                } else if (button.textContent === selectedOption && !isCorrect) {
                    // User's wrong answer
                    button.classList.add('wrong-answer');
                }

                // Disable all buttons
                button.disabled = true;
            });

            // Show feedback
            if (feedbackEl && feedbackTextEl) {
                feedbackEl.classList.remove('hidden', 'bg-green-100', 'bg-red-100', 'bg-yellow-100');
                feedbackTextEl.classList.remove('text-green-800', 'text-red-800', 'text-yellow-800');
                
                feedbackEl.classList.add(isCorrect ? 'bg-green-100' : 'bg-red-100');
                feedbackTextEl.classList.add(isCorrect ? 'text-green-800' : 'text-red-800');
                feedbackTextEl.textContent = isCorrect ? 'Correct! ðŸŽ‰' : `Incorrect. The correct answer is: ${currentQuestion.answer}`;
            }

            // Show next button
            if (nextBtn) nextBtn.classList.remove('hidden');
        }

        // Move to next question
        function nextQuestion() {
            currentQuestionIndex++;

            if (currentQuestionIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        // Show results screen
        function showResults() {
            try {
                // Stop any running timer
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
                
                quizScreen.classList.add('hidden');
                quizScreen.classList.remove('flex');
                resultScreen.classList.remove('hidden');
                resultScreen.classList.add('flex');

                // Update final score
                if (finalScoreEl) finalScoreEl.textContent = score;

                // Calculate and display percentage
                const percentage = Math.round((score / currentQuestions.length) * 100);
                if (resultPercentageEl) resultPercentageEl.textContent = `${percentage}%`;

                // Save quiz result to history
                saveQuizResult(percentage);

                // Animate circle
                if (resultCircleEl) {
                    const circumference = 2 * Math.PI * 54; // 2Ï€r where r=54
                    const offset = circumference - (percentage / 100) * circumference;
                    resultCircleEl.style.strokeDasharray = circumference;
                    resultCircleEl.style.strokeDashoffset = circumference;

                    // Animate with setTimeout for a delay
                    setTimeout(() => {
                        resultCircleEl.style.transition = 'stroke-dashoffset 1.5s ease-in-out';
                        resultCircleEl.style.strokeDashoffset = offset;
                    }, 200);
                }

                // Set result message
                let message = '';
                if (percentage >= 90) {
                    message = "Outstanding! You're a South Africa expert! ðŸ†";
                    showAchievement("South Africa Expert", "You scored over 90%! Your knowledge of South Africa is impressive!");
                    createResultConfetti();
                } else if (percentage >= 70) {
                    message = "Great job! You know South Africa well! ðŸŒ";
                    showAchievement("South Africa Enthusiast", "You scored over 70%! You have solid knowledge about South Africa.");
                } else if (percentage >= 50) {
                    message = "Good effort! You're learning about South Africa. ðŸŒ±";
                } else {
                    message = "Keep learning! South Africa has much to discover. ðŸ“š";
                }

                if (resultMessageEl) resultMessageEl.textContent = message;
            } catch (error) {
                console.error('Error showing results:', error);
                alert('An error occurred while displaying results. Your score was: ' + score);
            }
        }

        // Save quiz result to history
        function saveQuizResult(percentage) {
            try {
                const selectedCategory = categorySelect ? categorySelect.value : 'all';
                const difficulty = difficultySelect ? difficultySelect.value : 'easy';
                
                const result = {
                    date: new Date().toISOString(),
                    score,
                    total: currentQuestions.length,
                    percentage,
                    category: selectedCategory,
                    difficulty
                };
                
                quizHistory.push(result);
                
                // Keep only the last 50 results to avoid storage issues
                if (quizHistory.length > 50) {
                    quizHistory = quizHistory.slice(-50);
                }
                
                localStorage.setItem('saQuizHistory', JSON.stringify(quizHistory));
            } catch (error) {
                console.error('Error saving quiz result:', error);
                // Non-critical error, continue without saving
            }
        }

        // Show achievement
        function showAchievement(title, description) {
            if (!achievementSectionEl || !achievementTitleEl || !achievementDescriptionEl) return;
            
            achievementSectionEl.classList.remove('hidden');
            achievementTitleEl.textContent = title;
            achievementDescriptionEl.textContent = description;
        }

        // Create confetti effect for correct answers
        function createConfetti() {
            if (!confettiContainer) return;
            
            const colors = ['#FFB612', '#007A4D', '#DE3831', '#002395'];
            const shapes = ['circle', 'square'];

            // Limit total confetti for performance
            const confettiCount = window.innerWidth < 768 ? 10 : 20;

            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                const size = Math.random() * (8 - 5) + 5;

                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                if (shapes[Math.floor(Math.random() * shapes.length)] === 'circle') {
                    confetti.style.borderRadius = '50%';
                }

                const animation = ['slow', 'medium', 'fast'][Math.floor(Math.random() * 3)];
                confetti.classList.add(`confetti--animation-${animation}`);

                confettiContainer.appendChild(confetti);

                // Remove confetti after animation completes to prevent memory leaks
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, 3500);
            }
        }

        // Create more confetti for results
        function createResultConfetti() {
            if (!confettiContainer) return;
            
            // Only create a reasonable amount of confetti based on device performance
            const rounds = window.innerWidth < 768 ? 2 : 3;
            
            for (let i = 0; i < rounds; i++) {
                setTimeout(() => {
                    createConfetti();
                }, i * 600);
            }
        }

        // Share results
function shareResults() {
    try {
        const totalQuestions = currentQuestions.length;
        if (totalQuestions === 0) throw new Error('No questions available to calculate score.');

        const percentage = Math.round((score / totalQuestions) * 100);
        const selectedCategory = categorySelect?.value || 'all';
        const categoryText = selectedCategory === 'all' ? 'South Africa' : capitalizeFirstLetter(selectedCategory);
        const shareText = `I scored ${score}/${totalQuestions} (${percentage}%) on the ${categoryText} Quiz Challenge! Can you beat my score? Try it at https://vylexnexys.co.za/games/sa-quiz-challenge`;

        if (navigator.share) {
            navigator.share({
                title: 'South Africa Quiz Results',
                text: shareText,
            }).catch(error => {
                console.warn('Native sharing failed:', error);
                fallbackShare(shareText);
            });
        } else {
            fallbackShare(shareText);
        }
    } catch (error) {
        console.error('Error sharing results:', error);
        alert(`Unable to share results. Try copying your score manually: ${score}/${currentQuestions.length} (${percentage}%)`);
    }
}

// Capitalize first letter of a string
function capitalizeFirstLetter(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
}


        // Fallback sharing method
        function fallbackShare(text) {
            // Create temporary textarea
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                // Copy text
                const successful = document.execCommand('copy');
                if (successful) {
                    alert('Results copied to clipboard! Share it with your friends.');
                } else {
                    throw new Error('Copy command was unsuccessful');
                }
            } catch (err) {
                console.error('Unable to copy to clipboard:', err);
                alert('Could not copy results. Please select and copy this text manually:\n\n' + text);
            } finally {
                document.body.removeChild(textArea);
            }
        }

        // Reset quiz to start screen
        function resetQuiz() {
            // Clear any running timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            resultScreen.classList.add('hidden');
            resultScreen.classList.remove('flex');
            startScreen.classList.remove('hidden');
            startScreen.classList.add('flex');

            // Reset achievement section
            if (achievementSectionEl) {
                achievementSectionEl.classList.add('hidden');
            }
            
            // Update high score display with latest data
            updateHighScoreDisplay();
            
            // Clear any remaining confetti
            if (confettiContainer) {
                confettiContainer.innerHTML = '';
            }
        }

        // Utility function to shuffle array
        function shuffleArray(array) {
            if (!array || !Array.isArray(array)) {
                console.error('Invalid array passed to shuffleArray:', array);
                return [];
            }
            
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Utility function to capitalize first letter
        function capitalizeFirstLetter(string) {
            if (!string || typeof string !== 'string') {
                return '';
            }
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        // Initialize the quiz when page loads
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
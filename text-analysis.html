<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Text Analysis Suite</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .tool-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .animate-count {
            animation: pulse 1s;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .sidebar-item {
            transition: background-color 0.2s;
        }
        .sidebar-item:hover {
            background-color: rgba(79, 70, 229, 0.1);
        }
        .sidebar-item.active {
            background-color: rgba(79, 70, 229, 0.15);
            border-right: 3px solid #4F46E5;
        }
        
        #sidebar {
            transition: transform 0.3s ease-in-out;
            z-index: 50;
        }
        #sidebar.closed {
            transform: translateX(-100%);
        }
        
        .main-content {
            transition: margin-left 0.3s ease-in-out;
        }
        
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0 !important;
            }
            #sidebar {
                position: fixed;
            }
            #sidebarToggle {
                display: block !important;
            }
        }
        
        .overlay {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none;
        }
        .overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        @media (min-width: 769px) {
            #sidebarToggle {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Overlay for mobile -->
    <div id="overlay" class="overlay fixed inset-0 bg-black bg-opacity-50 z-40"></div>

    <!-- Toggle Button -->
    <button id="sidebarToggle" class="fixed top-4 left-4 z-50 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
    </button>

    <!-- Sidebar -->
    <div id="sidebar" class="w-64 bg-white shadow-lg flex flex-col h-screen fixed">
        <div class="p-6 border-b">
            <h1 class="text-2xl font-bold text-indigo-600">Text Analysis</h1>
            <p class="text-sm text-gray-600">Analysis Tools</p>
        </div>
        <nav class="flex-1 p-4">
            <div onclick="showTool('counter')" class="sidebar-item active p-3 rounded-md cursor-pointer mb-2 flex items-center">
                <svg class="w-5 h-5 mr-3 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"/>
                </svg>
                Word Counter
            </div>
            <div onclick="showTool('case')" class="sidebar-item p-3 rounded-md cursor-pointer mb-2 flex items-center">
                <svg class="w-5 h-5 mr-3 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v7h7M4 11v7h7m4-7h3m-3 4h3m-6-4h.01M9 11h.01"/>
                </svg>
                Case Converter
            </div>
            <div onclick="showTool('stats')" class="sidebar-item p-3 rounded-md cursor-pointer mb-2 flex items-center">
                <svg class="w-5 h-5 mr-3 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
                Advanced Stats
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="ml-64 flex-1 flex flex-col min-h-screen">
        <main class="flex-1 p-8">
            <!-- Word Counter Tool -->
            <div id="counter" class="tool-section max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-indigo-600 mb-6">Word & Character Counter</h2>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <textarea id="countText" class="w-full h-64 p-4 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none" placeholder="Enter your text here..."></textarea>
                    <button onclick="countWordsAndChars()" class="mt-4 w-full bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 transition-colors">
                        Analyze Text
                    </button>
                    <div id="countResults" class="mt-4 space-y-2"></div>
                </div>
            </div>

            <!-- Case Converter Tool -->
            <div id="case" class="tool-section max-w-3xl mx-auto hidden">
                <h2 class="text-3xl font-bold text-indigo-600 mb-6">Case Converter</h2>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <textarea id="caseText" class="w-full h-64 p-4 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none" placeholder="Enter your text here..."></textarea>
                    <div class="grid grid-cols-2 gap-3 mt-4">
                        <button onclick="convertCase('upper')" class="bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 transition-colors">UPPERCASE</button>
                        <button onclick="convertCase('lower')" class="bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 transition-colors">lowercase</button>
                        <button onclick="convertCase('title')" class="bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 transition-colors">Title Case</button>
                        <button onclick="convertCase('sentence')" class="bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 transition-colors">Sentence case</button>
                    </div>
                    <div id="caseResults" class="mt-4 p-4 bg-gray-50 rounded-md hidden"></div>
                </div>
            </div>

            <!-- Advanced Stats Tool -->
            <div id="stats" class="tool-section max-w-3xl mx-auto hidden">
                <h2 class="text-3xl font-bold text-indigo-600 mb-6">Advanced Text Statistics</h2>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <textarea id="statsText" class="w-full h-64 p-4 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none" placeholder="Enter your text here..."></textarea>
                    <button onclick="analyzeText()" class="mt-4 w-full bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 transition-colors">
                        Generate Statistics
                    </button>
                    <div id="statsResults" class="mt-4 space-y-2"></div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-white border-t py-4 px-8 text-center">
            <p class="text-gray-600">By Vylex Nexys</p>
        </footer>
    </div>

    <script>
    // Sidebar state and element references
let isSidebarOpen = window.innerWidth > 768;
const sidebar = document.getElementById('sidebar');
const mainContent = document.getElementById('mainContent');
const overlay = document.getElementById('overlay');
const toggleButton = document.getElementById('sidebarToggle');

// Function to update sidebar state
function updateSidebarState(isOpen) {
    isSidebarOpen = isOpen;
    
    // Update sidebar visibility
    sidebar.classList.toggle('closed', !isOpen);
    overlay.classList.toggle('active', isOpen && window.innerWidth <= 768);
    
    // Update main content margin
    if (window.innerWidth > 768) {
        mainContent.style.marginLeft = isOpen ? '16rem' : '0';
        toggleButton.style.left = isOpen ? '272px' : '1rem';
    } else {
        mainContent.style.marginLeft = '0';
        toggleButton.style.left = '1rem';
    }
}

// Toggle sidebar function
function toggleSidebar() {
    updateSidebarState(!isSidebarOpen);
}

// Window resize handler with debounce
let resizeTimeout;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
        if (window.innerWidth > 768) {
            // Ensure sidebar is visible on desktop
            if (!isSidebarOpen) {
                updateSidebarState(true);
            }
        } else {
            // Ensure sidebar is closed on mobile
            updateSidebarState(false);
        }
    }, 100);
});

// Event listeners
toggleButton.addEventListener('click', toggleSidebar);
overlay.addEventListener('click', () => {
    if (isSidebarOpen && window.innerWidth <= 768) {
        toggleSidebar();
    }
});

// Handle escape key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isSidebarOpen && window.innerWidth <= 768) {
        toggleSidebar();
    }
});

// Tool switching functionality with improved mobile handling
function showTool(toolId) {
    // Hide all tool sections
    document.querySelectorAll('.tool-section').forEach(section => {
        section.classList.add('hidden');
    });
    
    // Show selected tool section
    document.getElementById(toolId).classList.remove('hidden');
    
    // Update sidebar active state
    document.querySelectorAll('.sidebar-item').forEach(item => {
        item.classList.remove('active');
    });
    event.currentTarget.classList.add('active');
    
    // Close sidebar on mobile after selection
    if (window.innerWidth <= 768 && isSidebarOpen) {
        toggleSidebar();
    }
}

// Initialize sidebar state based on screen size
updateSidebarState(window.innerWidth > 768);

        function countWordsAndChars() {
            const text = document.getElementById('countText').value;
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            const wordCount = words.length;
            const charCount = text.length;
            const charNoSpaces = text.replace(/\s/g, '').length;
            const uniqueWords = new Set(words.map(w => w.toLowerCase())).size;
            
            const results = [
                { label: 'Words', value: wordCount },
                { label: 'Characters (with spaces)', value: charCount },
                { label: 'Characters (without spaces)', value: charNoSpaces },
                { label: 'Unique Words', value: uniqueWords }
            ];

            const resultsHTML = results.map(result => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded animate-count">
                    <span class="text-gray-600">${result.label}:</span>
                    <span class="font-semibold text-indigo-600">${result.value}</span>
                </div>
            `).join('');

            document.getElementById('countResults').innerHTML = resultsHTML;
        }

        function convertCase(type) {
            const text = document.getElementById('caseText').value;
            let result = '';
            
            switch(type) {
                case 'upper':
                    result = text.toUpperCase();
                    break;
                case 'lower':
                    result = text.toLowerCase();
                    break;
                case 'title':
                    result = text.toLowerCase().split(' ')
                        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                        .join(' ');
                    break;
                case 'sentence':
                    result = text.toLowerCase().replace(/(^\w|\.\s+\w)/gm, letter => letter.toUpperCase());
                    break;
            }

            const resultsDiv = document.getElementById('caseResults');
            resultsDiv.textContent = result;
            resultsDiv.classList.remove('hidden');
        }

        function analyzeText() {
            const text = document.getElementById('statsText').value;
            const sentences = text.split(/[.!?]+/).filter(sentence => sentence.trim().length > 0);
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            const paragraphs = text.split('\n\n').filter(para => para.trim().length > 0);
            
            const avgWordLength = words.reduce((sum, word) => sum + word.length, 0) / words.length || 0;
            const avgSentenceLength = words.length / sentences.length || 0;
            const longestWord = words.length > 0 ? words.reduce((a, b) => a.length > b.length ? a : b) : 'N/A';
            
            const stats = [
                { label: 'Sentences', value: sentences.length },
                { label: 'Paragraphs', value: paragraphs.length },
                { label: 'Average word length', value: `${avgWordLength.toFixed(1)} characters` },
                { label: 'Average sentence length', value: `${avgSentenceLength.toFixed(1)} words` },
                { label: 'Longest word', value: longestWord },
                { label: 'Reading time', value: `${Math.ceil(words.length / 200)} minute(s)` }
            ];

            const statsHTML = stats.map(stat => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                    <span class="text-gray-600">${stat.label}:</span>
                    <span class="font-semibold text-indigo-600">${stat.value}</span>
                </div>
            `).join('');

            document.getElementById('statsResults').innerHTML = statsHTML;
        }
    </script>
</body>
</html>
